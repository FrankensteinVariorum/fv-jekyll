{"version":3,"sources":["assets/pre.jpg","assets/next.jpg","assets/variations.jpg","data/xml-cache.ts","data/edition.ts","tei-processing/helpers.ts","data/spine.ts","data/store.ts","components/helpers/EditionDot.tsx","components/PageLayout/EditionSelector.tsx","components/tei/TeiReactElement.tsx","components/tei/TeiReactText.tsx","components/tei/TeiAppWrapper.tsx","tei-processing/tei-converter.ts","components/tei/TeiContainer.tsx","components/PageLayout/Paging.tsx","components/PageLayout/Header.tsx","components/PageLayout/OptionsSelector.tsx","components/Variations/ReadingGroupComponent.tsx","components/Variations/App.tsx","components/Viewer/Viewer.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","XmlCache","Object","classCallCheck","this","_xmls","_promises","Map","url","_this","has","Promise","resolve","get","promise","fetchXML","set","then","delete","xml","DOMParser","parseFromString","fetch","response","text","doc","parseXML","documentCount","EditionWithBody","_Edition","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","key","value","document","getElementsByTagName","err","console","error","concat","code","Error","Edition","name","chunks","chunkId","chunkStr","_getXML","asyncToGenerator","regenerator_default","a","mark","_callee","wrap","_context","prev","next","FvStore","cache","getXML","getChunkUrl","abrupt","sent","stop","_x","MSEdition","_EditionWithBody","Chunk","edition","chunkNumber","tei","spine","root","variations","getRootElement","appRef","app","apps","find","id","_load","_callee2","chunk","_context2","getSpine","initialize","addAppReferences","_x2","_x3","evaluateXPath","xpath","resolver","createNSResolver","documentElement","xpathResult","evaluate","nodes","node","iterateNext","push","findElementByXmlId","xmlId","idResults","length","ReadingGroup","apparatus","groupId","editions","element","pointers","fillEditions","fillPointers","buildElement","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","done","ptr","indexOf","return","filter","implementation","createDocument","group","createElement","children","map","dereferenced","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","clone","cloneNode","appendChild","Apparatus","n","_groups","idAttr","attributes","getNamedItem","nAttr","parseInt","parsePointers","_this2","groupSet","Set","Array","from","grp","_this3","el","parsePointer","ptrElement","rdgElement","parentNode","tagName","witAttr","editionCode","substr","getEdition","rdgGroupElement","grpIdAttr","targetAttr","parts","split","referencedUrl","referencedTarget","ed","groups","Spine","_apps","_xml","_initialized","_initializationPromise","_this4","innerInitialize","_innerInitialize","parseApps","fetchAllReferences","rewriteStringRanges","dereferencePointers","addBackPointers","buildGroupsInApps","_parseApps","_callee3","appElements","_context3","_fetchAllReferences","_callee4","allUrls","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","_step3","urls","unique","promises","_context4","t0","finish","all","_rewriteStringRanges","_callee5","re","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_loop","_iterator4","_step4","_this5","_context6","_wrapRegExp","start","invalidPointers","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_iterator5","_step5","match","stringRange","validPointers","_context5","rewriteStringRange","add","t1","delegateYield","_rewriteStringRange","_callee6","range","targetDoc","patchedXPath","targetNodes","targetElement","_context7","replace","mockElementCount","setAttribute","_dereferencePointers","_callee7","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_loop2","_iterator6","_step6","_context9","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_iterator7","_step7","_document","_context8","outerHTML","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","buildGroups","FvStoreClass","spines","i","sp","instance","EditionDot","classes","props","react_default","className","React","Component","EditionSelector","state","availableEditions","componentDidMount","index","label","helpers_EditionDot","setState","editionChanged","selectedOption","onEditionSelected","warn","react_select_browser_esm","onChange","options","TeiReactElement","tag","closingTag","htmlTag","data-tei-tag","ReactHtmlParser","TeiReactText","showText","TeiAppWrapper","onClick","showVariations","onAppClick","intensity","innerClasses","getOtherGroups","dotElements","groupDots","log","TeiConverter","teiTag","nodeAttributes","valueProps","nodeName","nodeValue","reactChildren","hasChildNodes","childNodes","childNode","childElement","nodeType","teiToReactElement","textContent","trim","teiProps","buildProperties","getHtmlTag","reactElement","getApp","TeiRendering","getTeiObjects","body","prevProps","Paging","chunkIndex","availableChunks","disablePrev","disableNext","onChunkChanged","findIndex","opt","toString","onChunkSelected","updateChunk","delta","newChunk","newOption","c","firstChunk","disabled","src","pre","alt","Header","e","OptionsSelector","onVariationChanged","newShow","onTextChanged","newShowText","type","checked","ReadingGroupComponent","title","join","dots","content","Variation","Variations_ReadingGroupComponent","Viewer","loading","onNewChunk","load","onNewEdition","onVariation","show","onText","PageLayout_EditionSelector","PageLayout_Paging","PageLayout_OptionsSelector","PageLayout_Header","TeiContainer","Variations_App","App","components_Viewer_Viewer","Boolean","window","location","hostname","ReactDOM","render","src_App_0","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"oHAAAA,EAAAC,QAAA,wvBCAAD,EAAAC,QAAA,wuBCAAD,EAAAC,QAAA,2pCCMqBC,aAKjB,SAAAA,IAAsBC,OAAAC,EAAA,EAAAD,CAAAE,KAAAH,GAAAG,KAJbC,WAIY,EAAAD,KAHbE,eAGa,EACjBF,KAAKC,MAAQ,IAAIE,IACjBH,KAAKE,UAAY,IAAIC,uDAGXC,GAAgC,IAAAC,EAAAL,KAG1C,GAAIA,KAAKC,MAAMK,IAAIF,GACf,OAAOG,QAAQC,QAAQR,KAAKC,MAAMQ,IAAIL,IAG1C,GAAIJ,KAAKE,UAAUI,IAAIF,GACnB,OAAOJ,KAAKE,UAAUO,IAAIL,GAG9B,IAAMM,EAAUV,KAAKW,SAASP,GAK9B,OAJAJ,KAAKE,UAAUU,IAAIR,EAAKM,GACxBA,EAAQG,KAAK,WACTR,EAAKH,UAAUY,OAAOV,KAEnBM,mCAGMK,GAIb,OAHe,IAAIC,WACAC,gBAAgBF,EAAK,qFAKrBX,6FACIc,MAAMd,iBAAvBe,kBACYA,EAASC,qBAArBL,SAEAM,EAAMrB,KAAKsB,SAASP,GAC1Bf,KAAKC,MAAMW,IAAIR,EAAKiB,qBAEbA,+GA3CMxB,EAGF0B,cAAgB,ECN5B,IAyBMC,EAAb,SAAAC,GAAA,SAAAD,IAAA,OAAA1B,OAAAC,EAAA,EAAAD,CAAAE,KAAAwB,GAAA1B,OAAA4B,EAAA,EAAA5B,CAAAE,KAAAF,OAAA6B,EAAA,EAAA7B,CAAA0B,GAAAI,MAAA5B,KAAA6B,YAAA,OAAA/B,OAAAgC,EAAA,EAAAhC,CAAA0B,EAAAC,GAAA3B,OAAAiC,EAAA,EAAAjC,CAAA0B,EAAA,EAAAQ,IAAA,iBAAAC,MAAA,SAC0BC,GAClB,IACI,OAAOA,EAASC,qBAAqB,QAAQ,GAC/C,MAAMC,GAEJ,MADAC,QAAQC,MAAR,iCAAAC,OAA+CvC,KAAKwC,KAApD,MAAAD,OAA6DH,IACvD,IAAIK,MAAM,kCAN5BjB,EAAA,CAzBA,WAKI,SAAAkB,EAAYF,EAAcG,EAAcC,GAAmB9C,OAAAC,EAAA,EAAAD,CAAAE,KAAA0C,GAAA1C,KAJ3CwC,KAAe,GAI2BxC,KAH1C2C,KAAe,GAG2B3C,KAF1C4C,OAAmB,GAG/B5C,KAAKwC,KAAOA,EACZxC,KAAK2C,KAAOA,EACZ3C,KAAK4C,OAASA,EARtB,OAAA9C,OAAAiC,EAAA,EAAAjC,CAAA4C,EAAA,EAAAV,IAAA,cAAAC,MAAA,SAW0BY,GAClB,IAAMC,EAAWD,EAAU,GAAV,IAAAN,OAAmBM,GAAnB,GAAAN,OAAkCM,GAGnD,MAFS,qFAAAN,OAAwFvC,KAAKwC,KAA7F,MAAAD,OAAsGO,EAAtG,UAbjB,CAAAd,IAAA,SAAAC,MAAA,eAAAc,EAAAjD,OAAAkD,EAAA,EAAAlD,CAAAmD,EAAAC,EAAAC,KAAA,SAAAC,EAkBwBP,GAlBxB,OAAAI,EAAAC,EAAAG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAmBqBC,EAAQC,MAAMC,OAAO3D,KAAK4D,YAAYf,IAnB3D,cAAAS,EAAAO,OAAA,SAAAP,EAAAQ,MAAA,wBAAAR,EAAAS,SAAAX,EAAApD,SAAA,gBAAAgE,GAAA,OAAAjB,EAAAnB,MAAA5B,KAAA6B,YAAA,MAAAa,EAAA,IAoCauB,EAAb,SAAAC,GAAA,SAAAD,IAAA,OAAAnE,OAAAC,EAAA,EAAAD,CAAAE,KAAAiE,GAAAnE,OAAA4B,EAAA,EAAA5B,CAAAE,KAAAF,OAAA6B,EAAA,EAAA7B,CAAAmE,GAAArC,MAAA5B,KAAA6B,YAAA,OAAA/B,OAAAgC,EAAA,EAAAhC,CAAAmE,EAAAC,GAAAD,EAAA,CAA+BzC,GAElB2C,EAAb,WAOI,SAAAA,EAAoBC,EAAkBC,EAAqBC,EAAeC,GAAezE,OAAAC,EAAA,EAAAD,CAAAE,KAAAmE,GAAAnE,KANzEoE,aAMwE,EAAApE,KALxEqE,iBAKwE,EAAArE,KAJxEsE,SAIwE,EAAAtE,KAHxEwE,UAGwE,EAAAxE,KAFxEyE,gBAEwE,EACpFzE,KAAKoE,QAAUA,EACfpE,KAAKqE,YAAcA,EACnBrE,KAAKsE,IAAMA,EACXtE,KAAKyE,WAAaF,EAClBvE,KAAKwE,KAAOJ,EAAQM,eAAeJ,GAZ3C,OAAAxE,OAAAiC,EAAA,EAAAjC,CAAAqE,EAAA,EAAAnC,IAAA,SAAAC,MAAA,SA0BkB0C,GACV,IAAMC,EAAM5E,KAAKyE,WAAWI,KAAKC,KAAK,SAAC5B,GAAD,OAAOA,EAAE6B,KAAOJ,IACtD,IAAIC,EACA,MAAM,IAAInC,MAAJ,oBAAAF,OAA8BoC,IAExC,OAAOC,IA/Bf,CAAA5C,IAAA,mBAAAC,MAAA,iBAAAD,IAAA,OAAAC,MAAA,eAAA+C,EAAAlF,OAAAkD,EAAA,EAAAlD,CAAAmD,EAAAC,EAAAC,KAAA,SAAA8B,EAe6Bb,EAAkBC,GAf/C,IAAAnC,EAAAqC,EAAAW,EAAA,OAAAjC,EAAAC,EAAAG,KAAA,SAAA8B,GAAA,cAAAA,EAAA5B,KAAA4B,EAAA3B,MAAA,cAAA2B,EAAA3B,KAAA,EAgB+BY,EAAQT,OAAOU,GAhB9C,cAgBcnC,EAhBdiD,EAAArB,KAAAqB,EAAA3B,KAAA,EAiB4BC,EAAQ2B,SAASf,GAjB7C,cAiBcE,EAjBdY,EAAArB,KAAAqB,EAAA3B,KAAA,EAkBce,EAAMc,aAlBpB,cAoBcH,EAAQ,IAAIf,EAAMC,EAASC,EAAanC,EAAUqC,IAClDe,mBArBdH,EAAAtB,OAAA,SAuBeqB,GAvBf,yBAAAC,EAAApB,SAAAkB,MAAA,gBAAAM,EAAAC,GAAA,OAAAR,EAAApD,MAAA5B,KAAA6B,YAAA,MAAAsC,EAAA,WCxCO,SAASsB,EAAcpE,EAAeqE,GAMzC,IALA,IAAMC,EAAWtE,EAAIuE,iBAAiBvE,EAAIwE,iBACpCC,EAAczE,EAAI0E,SAASL,EAAOrE,EAAKsE,GACvCK,EAAgB,GAElBC,EAAOH,EAAYI,cACjBD,GACFD,EAAMG,KAAKF,GACXA,EAAOH,EAAYI,cAGvB,OAAOF,EAGJ,SAASI,EAAmB/E,EAAegF,GAC9C,IACMC,EAAYb,EAAcpE,EADrB,gBAAAkB,OAAmB8D,EAAnB,OAGX,GAAyB,IAArBC,EAAUC,OACV,MAAM9D,MAAK,WAAAF,OAAY8D,EAAZ,mCACR,GAAIC,EAAUC,OAAS,EAC1B,MAAM9D,MAAK,WAAAF,OAAY8D,EAAZ,sCAEf,OAAOC,EAAU,q0BCJd,IAAME,EAAb,WAQI,SAAAA,EAAYC,EAAsBC,GAAkB5G,OAAAC,EAAA,EAAAD,CAAAE,KAAAwG,GAAAxG,KAPpC0G,aAOmC,EAAA1G,KANnC2G,cAMmC,EAAA3G,KALnCyG,eAKmC,EAAAzG,KAJnC4G,aAImC,EAAA5G,KAFlC6G,cAEkC,EAC/C7G,KAAK0G,QAAUA,EACf1G,KAAKyG,UAAYA,EACjBzG,KAAK2G,SAAW3G,KAAK8G,eACrB9G,KAAK6G,SAAW7G,KAAK+G,eACrB/G,KAAK4G,QAAU5G,KAAKgH,eAb5B,OAAAlH,OAAAiC,EAAA,EAAAjC,CAAA0G,EAAA,EAAAxE,IAAA,eAAAC,MAAA,WAiBQ,IAAM0E,EAAW,GADEM,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAEnB,QAAAC,EAAAC,EAAkBtH,KAAKyG,UAAUI,SAAjCU,OAAAC,cAAAP,GAAAI,EAAAC,EAAA9D,QAAAiE,MAAAR,GAAA,EAA2C,KAAhCS,EAAgCL,EAAApF,MACnCyF,EAAIhB,UAAY1G,KAAK0G,UAA8C,IAAnCC,EAASgB,QAAQD,EAAItD,UACrDuC,EAASR,KAAKuB,EAAItD,UAJP,MAAAhC,GAAA8E,GAAA,EAAAC,EAAA/E,EAAA,YAAA6E,GAAA,MAAAK,EAAAM,QAAAN,EAAAM,SAAA,WAAAV,EAAA,MAAAC,GAQnB,OAAOR,IAxBf,CAAA3E,IAAA,eAAAC,MAAA,WA2B2B,IAAA5B,EAAAL,KAEboE,EAAUpE,KAAK2G,SAAS,GAC9B,OAAO3G,KAAKyG,UAAUI,SAASgB,OAAO,SAACH,GAAD,OAASA,EAAIhB,UAAYrG,EAAKqG,SAAWgB,EAAItD,UAAYA,MA9BvG,CAAApC,IAAA,eAAAC,MAAA,WAoCQ,IAAMZ,EAAMa,SAAS4F,eAAeC,eAAe,KAAM,KAAM,MACzDC,EAAQ3G,EAAI4G,cAAc,UAC1BC,EAAWlI,KAAK6G,SAASsB,IAAI,SAACT,GAAD,OAASA,EAAIU,eAL7BC,GAAA,EAAAC,GAAA,EAAAC,OAAAnB,EAAA,IAMnB,QAAAoB,EAAAC,EAAmBP,EAAnBX,OAAAC,cAAAa,GAAAG,EAAAC,EAAAjF,QAAAiE,MAAAY,GAAA,EAA6B,KACnBK,EADmBF,EAAAvG,MACL0G,WAAU,GAC9BX,EAAMY,YAAYF,IARH,MAAAtG,GAAAkG,GAAA,EAAAC,EAAAnG,EAAA,YAAAiG,GAAA,MAAAI,EAAAb,QAAAa,EAAAb,SAAA,WAAAU,EAAA,MAAAC,GAYnB,OAFAlH,EAAIuH,YAAYZ,GAETA,MA7CfxB,EAAA,GAiDaqC,EAAb,WAQI,SAAAA,EAAYjC,GAAmB9G,OAAAC,EAAA,EAAAD,CAAAE,KAAA6I,GAAA7I,KAPf+E,QAOc,EAAA/E,KANd8I,OAMc,EAAA9I,KALd4G,aAKc,EAAA5G,KAHvB6G,cAGuB,EAAA7G,KAFtB+I,aAEsB,EAC1B/I,KAAK4G,QAAUA,EAEf,IAAMoC,EAASpC,EAAQqC,WAAWC,aAAa,UAC/C,IAAKF,EACD,MAAM,IAAIvG,MAAM,4BAEpBzC,KAAK+E,GAAKiE,EAAO/G,MAEjB,IAAMkH,EAAQvC,EAAQqC,WAAWC,aAAa,KAC9ClJ,KAAK8I,EAAIK,EAAQC,SAASD,EAAMlH,YAASmF,EAEzCpH,KAAK6G,SAAW7G,KAAKqJ,gBACrBrJ,KAAK+I,QAAU,GArBvB,OAAAjJ,OAAAiC,EAAA,EAAAjC,CAAA+I,EAAA,EAAA7G,IAAA,cAAAC,MAAA,WA0ByB,IAAAqH,EAAAtJ,KACXuJ,EAAW,IAAIC,IAAYxJ,KAAK6G,SAASsB,IAAI,SAACT,GAAD,OAASA,EAAIhB,WAChE1G,KAAK+I,QAAUU,MAAMC,KAAKH,GAAUpB,IAAI,SAACwB,GAAD,OAAS,IAAInD,EAAa8C,EAAMK,OA5BhF,CAAA3H,IAAA,gBAAAC,MAAA,WA+B4B,IAAA2H,EAAA5J,KAIpB,OAHoByJ,MAAMC,KAAK1J,KAAK4G,QAAQzE,qBAAqB,QACxCgG,IAAI,SAAC0B,GAAD,OAAQD,EAAKE,aAAaD,OAjC/D,CAAA7H,IAAA,eAAAC,MAAA,SAsCyB8H,GACjB,IAAMC,EAAaD,EAAWE,WAC9B,IAAKD,GAAqC,QAAvBA,EAAWE,QAC1B,MAAM,IAAIzH,MAAJ,gCAEV,IAAM0H,EAAUH,EAAWf,WAAWC,aAAa,OACnD,IAAKiB,EACD,MAAM,IAAI1H,MAAM,+CAEpB,IACI2B,EADEgG,EAAcD,EAAQlI,MAAMoI,OAAO,GAEzC,IACIjG,EAAUX,EAAQ6G,WAAWF,GAC/B,MAAMhI,GACJ,MAAM,IAAIK,MAAJ,6BAAAF,OAAuC4H,EAAQlI,QAGzD,IAAMsI,EAAkBP,EAAWC,WACnC,IAAIM,GAA+C,WAA5BA,EAAgBL,QACnC,MAAM,IAAIzH,MAAJ,2CAEV,IAAM+H,EAAYD,EAAgBtB,WAAWC,aAAa,UAC1D,IAAKsB,EACD,MAAM,IAAI/H,MAAM,0BAEpB,IAAMiE,EAAU8D,EAAUvI,MAEpBwI,EAAaV,EAAWd,WAAWC,aAAa,UACtD,IAAKuB,EACD,MAAM,IAAIhI,MAAJ,0CAGV,IAAMiI,EAAQD,EAAWxI,MAAM0I,MAAM,KACrC,GAAqB,IAAjBD,EAAMnE,OACN,MAAM,IAAI9D,MAAJ,UAAAF,OAAoBkI,EAAWxI,MAA/B,+CAGV,MAAO,CACH8H,aACA3F,UACAsC,UACAkE,cAAeF,EAAM,GACrBG,iBAAkBH,EAAM,MAhFpC,CAAA1I,IAAA,iBAAAC,MAAA,SAoF0B6I,GAElB,OAAO9K,KAAK+K,OAAOlD,OAAO,SAAC8B,GAAD,OAAuC,IAA9BA,EAAIhD,SAASgB,QAAQmD,OAtFhE,CAAA9I,IAAA,SAAAvB,IAAA,WAwB0B,OAAOT,KAAK+I,YAxBtCF,EAAA,GAiGamC,EAAb,WAQI,SAAAA,EAAY9F,GAAgBpF,OAAAC,EAAA,EAAAD,CAAAE,KAAAgL,GAAAhL,KAPZqE,iBAOW,EAAArE,KANnBiL,WAMmB,EAAAjL,KALnBkL,UAKmB,EAAAlL,KAJnBmL,cAAe,EAIInL,KAHnBoL,4BAGmB,EACvBpL,KAAKqE,YAAca,EAT3B,OAAApF,OAAAiC,EAAA,EAAAjC,CAAAkL,EAAA,EAAAhJ,IAAA,aAAAC,MAAA,WAYuC,IAAAoJ,EAAArL,KAG/B,OAAGA,KAAKoL,uBACGpL,KAAKoL,wBAGhBpL,KAAKoL,uBAAyBpL,KAAKsL,kBACnCtL,KAAKoL,uBAAuBvK,KAAK,WAC7BwK,EAAKD,4BAAyBhE,IAE3BpH,KAAKoL,0BAvBpB,CAAApJ,IAAA,kBAAAC,MAAA,eAAAsJ,EAAAzL,OAAAkD,EAAA,EAAAlD,CAAAmD,EAAAC,EAAAC,KAAA,SAAAC,IAAA,OAAAH,EAAAC,EAAAG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,WA2BWxD,KAAKmL,aA3BhB,CAAA7H,EAAAE,KAAA,eAAAF,EAAAO,OAAA,wBAAAP,EAAAE,KAAA,EA+B0BxD,KAAK2D,SA/B/B,cA+BQ3D,KAAKkL,KA/Bb5H,EAAAQ,KAAAR,EAAAE,KAAA,EAiCcxD,KAAKwL,YAjCnB,cAAAlI,EAAAE,KAAA,EAkCcxD,KAAKyL,qBAlCnB,cAAAnI,EAAAE,KAAA,GAmCcxD,KAAK0L,sBAnCnB,eAAApI,EAAAE,KAAA,GAoCcxD,KAAK2L,sBApCnB,QAqCQ3L,KAAK4L,kBACL5L,KAAK6L,oBAEL7L,KAAKmL,cAAe,EAxC5B,yBAAA7H,EAAAS,SAAAX,EAAApD,SAAA,yBAAAuL,EAAA3J,MAAA5B,KAAA6B,YAAA,KAAAG,IAAA,SAAAC,MAAA,eAAAc,EAAAjD,OAAAkD,EAAA,EAAAlD,CAAAmD,EAAAC,EAAAC,KAAA,SAAA8B,IAAA,IAAAnC,EAAA1C,EAAA8B,EAAA,OAAAe,EAAAC,EAAAG,KAAA,SAAA8B,GAAA,cAAAA,EAAA5B,KAAA4B,EAAA3B,MAAA,cA4CcV,EAAW9C,KAAKqE,YAAc,GAAnB,IAAA9B,OAA4BvC,KAAKqE,aAAjC,GAAA9B,OAAoDvC,KAAKqE,aACpEjE,EA7Cd,0FAAAmC,OA6C8GO,EA7C9G,QAAAqC,EAAA3B,KAAA,EA+C+BC,EAAQC,MAAMC,OAAOvD,GA/CpD,cA+Cc8B,EA/CdiD,EAAArB,KAAAqB,EAAAtB,OAAA,SAgDe3B,GAhDf,wBAAAiD,EAAApB,SAAAkB,EAAAjF,SAAA,yBAAA+C,EAAAnB,MAAA5B,KAAA6B,YAAA,KAAAG,IAAA,YAAAC,MAAA,eAAA6J,EAAAhM,OAAAkD,EAAA,EAAAlD,CAAAmD,EAAAC,EAAAC,KAAA,SAAA4I,IAAA,IAAAC,EAAAnH,EAAA,OAAA5B,EAAAC,EAAAG,KAAA,SAAA4I,GAAA,cAAAA,EAAA1I,KAAA0I,EAAAzI,MAAA,UAoDYxD,KAAKkL,KApDjB,CAAAe,EAAAzI,KAAA,cAqDkB,IAAIf,MAAM,wDArD5B,OAwDcuJ,EAAcvC,MAAMC,KAAK1J,KAAKkL,KAAK/I,qBAAqB,QACxD0C,EAAOmH,EAAY7D,IAAI,SAACvD,GAAD,OAAS,IAAIiE,EAAUjE,KACpD5E,KAAKiL,MAAQpG,EA1DrB,wBAAAoH,EAAAlI,SAAAgI,EAAA/L,SAAA,yBAAA8L,EAAAlK,MAAA5B,KAAA6B,YAAA,KAAAG,IAAA,qBAAAC,MAAA,eAAAiK,EAAApM,OAAAkD,EAAA,EAAAlD,CAAAmD,EAAAC,EAAAC,KAAA,SAAAgJ,IAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA7H,EAAA8H,EAAAC,EAAAC,EAAA,OAAA3J,EAAAC,EAAAG,KAAA,SAAAwJ,GAAA,cAAAA,EAAAtJ,KAAAsJ,EAAArJ,MAAA,OAwEQ,IAFI4I,EAAU,GAtEtBC,GAAA,EAAAC,GAAA,EAAAC,OAAAnF,EAAAyF,EAAAtJ,KAAA,EAwEQiJ,EAAexM,KAAK6E,KAApB0C,OAAAC,cAAA6E,GAAAI,EAAAD,EAAAhJ,QAAAiE,MAAA4E,GAAA,EAAQzH,EAAkB6H,EAAAxK,MAChByK,EAAO9H,EAAIiC,SAASsB,IAAI,SAACT,GAAD,OAASA,EAAIkD,gBAC3CwB,EAAUA,EAAQ7J,OAAOmK,GA1ErCG,EAAArJ,KAAA,gBAAAqJ,EAAAtJ,KAAA,EAAAsJ,EAAAC,GAAAD,EAAA,SAAAP,GAAA,EAAAC,EAAAM,EAAAC,GAAA,QAAAD,EAAAtJ,KAAA,GAAAsJ,EAAAtJ,KAAA,GAAA8I,GAAA,MAAAG,EAAA5E,QAAA4E,EAAA5E,SAAA,WAAAiF,EAAAtJ,KAAA,IAAA+I,EAAA,CAAAO,EAAArJ,KAAA,eAAA+I,EAAA,eAAAM,EAAAE,OAAA,mBAAAF,EAAAE,OAAA,mBA6EcJ,EAASlD,MAAMC,KAAK,IAAIF,IAAY4C,IACpCQ,EAAWD,EAAOxE,IAAI,SAAC/H,GAAD,OAASqD,EAAQC,MAAMC,OAAOvD,KA9ElEyM,EAAArJ,KAAA,GA+EcjD,QAAQyM,IAAIJ,GA/E1B,yBAAAC,EAAA9I,SAAAoI,EAAAnM,KAAA,uDAAAkM,EAAAtK,MAAA5B,KAAA6B,YAAA,KAAAG,IAAA,sBAAAC,MAAA,eAAAgL,EAAAnN,OAAAkD,EAAA,EAAAlD,CAAAmD,EAAAC,EAAAC,KAAA,SAAA+J,IAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA1N,KAAA,OAAAiD,EAAAC,EAAAG,KAAA,SAAAsK,GAAA,cAAAA,EAAApK,KAAAoK,EAAAnK,MAAA,OAsFc2J,EAtFdS,EAsFmB,qCAtFnB,CAAAlI,MAAA,EAAAmI,MAAA,EAAAtH,OAAA,IAAA6G,GAAA,EAAAC,GAAA,EAAAC,OAAAlG,EAAAuG,EAAApK,KAAA,EAAAgK,EAAAtK,EAAAC,EAAAC,KAAA,SAAAoK,IAAA,IAAA3I,EAAAkJ,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAzG,EAAA0G,EAAAC,EAAAC,EAAA,OAAArL,EAAAC,EAAAG,KAAA,SAAAkL,GAAA,cAAAA,EAAAhL,KAAAgL,EAAA/K,MAAA,OAwFgBoB,EAxFhB6I,EAAAxL,MAyFkB6L,EAAkB,IAAItE,IAzFxCuE,GAAA,EAAAC,GAAA,EAAAC,OAAA7G,EAAAmH,EAAAhL,KAAA,EAAA2K,EA0F2BtJ,EAAIiC,SA1F/BU,OAAAC,YAAA,UAAAuG,GAAAI,EAAAD,EAAA1K,QAAAiE,KAAA,CAAA8G,EAAA/K,KAAA,YA0FoBkE,EA1FpByG,EAAAlM,QA2FsBmM,EAAQ1G,EAAImD,iBAAiBuD,MAAMjB,IA3FzD,CAAAoB,EAAA/K,KAAA,gBA6F0B6K,EAAc,CAChB3I,MAAO0I,EAAMrD,OAAQrF,MACrBmI,MAAOzE,SAASgF,EAAMrD,OAAQ8C,OAC9BtH,OAAQ6C,SAASgF,EAAMrD,OAAQxE,SAhGvDgI,EAAAhL,KAAA,GAAAgL,EAAA/K,KAAA,GAmG8BkK,EAAKc,mBAAmB9G,EAAK2G,GAnG3D,QAAAE,EAAA/K,KAAA,iBAAA+K,EAAAhL,KAAA,GAAAgL,EAAAzB,GAAAyB,EAAA,UAqGwBT,EAAgBW,IAAI/G,GArG5C,QAAAqG,GAAA,EAAAQ,EAAA/K,KAAA,gBAAA+K,EAAA/K,KAAA,iBAAA+K,EAAAhL,KAAA,GAAAgL,EAAAG,GAAAH,EAAA,SAAAP,GAAA,EAAAC,EAAAM,EAAAG,GAAA,QAAAH,EAAAhL,KAAA,GAAAgL,EAAAhL,KAAA,GAAAwK,GAAA,MAAAG,EAAAtG,QAAAsG,EAAAtG,SAAA,WAAA2G,EAAAhL,KAAA,IAAAyK,EAAA,CAAAO,EAAA/K,KAAA,eAAAyK,EAAA,eAAAM,EAAAxB,OAAA,mBAAAwB,EAAAxB,OAAA,YA0GkBuB,EAAgB1J,EAAIiC,SAASgB,OAAO,SAACH,GAAD,OAAUoG,EAAgBxN,IAAIoH,KACxE9C,EAAIiC,SAAWyH,EA3G3B,yBAAAC,EAAAxK,SAAAwJ,EAAA,2CAAAC,EAwFuBxN,KAAK6E,KAxF5B0C,OAAAC,YAAA,UAAA4F,GAAAK,EAAAD,EAAAhK,QAAAiE,KAAA,CAAAkG,EAAAnK,KAAA,gBAAAmK,EAAAgB,cAAApB,IAAA,eAAAH,GAAA,EAAAO,EAAAnK,KAAA,gBAAAmK,EAAAnK,KAAA,iBAAAmK,EAAApK,KAAA,GAAAoK,EAAAe,GAAAf,EAAA,SAAAN,GAAA,EAAAC,EAAAK,EAAAe,GAAA,QAAAf,EAAApK,KAAA,GAAAoK,EAAApK,KAAA,GAAA6J,GAAA,MAAAI,EAAA5F,QAAA4F,EAAA5F,SAAA,WAAA+F,EAAApK,KAAA,IAAA8J,EAAA,CAAAM,EAAAnK,KAAA,eAAA8J,EAAA,eAAAK,EAAAZ,OAAA,mBAAAY,EAAAZ,OAAA,6BAAAY,EAAA5J,SAAAmJ,EAAAlN,KAAA,wDAAAiN,EAAArL,MAAA5B,KAAA6B,YAAA,KAAAG,IAAA,qBAAAC,MAAA,eAAA2M,EAAA9O,OAAAkD,EAAA,EAAAlD,CAAAmD,EAAAC,EAAAC,KAAA,SAAA0L,EA+GqCnH,EAAkBoH,GA/GvD,IAAAC,EAAAC,EAAAC,EAAAC,EAAAlG,EAAA3C,EAAA,OAAApD,EAAAC,EAAAG,KAAA,SAAA8L,GAAA,cAAAA,EAAA5L,KAAA4L,EAAA3L,MAAA,cAAA2L,EAAA3L,KAAA,EAkHgCC,EAAQC,MAAMC,OAAO+D,EAAIkD,eAlHzD,UAkHcmE,EAlHdI,EAAArL,KAsHckL,EAAeF,EAAMpJ,MAAM0J,QAAQ,QAAS,IAGvB,KAFrBH,EAAcxJ,EAAcsJ,EAAWC,IAE7BzI,OAzHxB,CAAA4I,EAAA3L,KAAA,cA0HYnB,QAAQC,MAAR,0BAAAC,OAAwCyM,EAAxC,6BACMvM,MAAM,kCA3HxB,YA8HYwM,EAAY1I,OAAS,GA9HjC,CAAA4I,EAAA3L,KAAA,eA+HYnB,QAAQC,MAAR,0BAAAC,OAAwCyM,EAAxC,iCACMvM,MAAM,4CAhIxB,QAmIcyM,EAAgBD,EAAY,GAC5BjG,EAASkG,EAAcjG,WAAWC,aAAa,UACjD7C,EAAQ,GACR2C,EACA3C,EAAQ2C,EAAO/G,OAEfoE,EAAK,WAAA9D,OAAcyI,EAAMqE,kBACzBrE,EAAMqE,kBAAoB,EAI1BH,EAAcI,aAAa,SAAUjJ,IAIzCqB,EAAImD,iBAAmBxE,EACvBqB,EAAIqC,WAAWuF,aAAa,SAA5B,GAAA/M,OAAyCmF,EAAImD,iBAA7C,KAAAtI,OAAiE8D,IAnJzE,yBAAA8I,EAAApL,SAAA8K,MAAA,gBAAA7K,EAAAuB,GAAA,OAAAqJ,EAAAhN,MAAA5B,KAAA6B,YAAA,KAAAG,IAAA,sBAAAC,MAAA,eAAAsN,EAAAzP,OAAAkD,EAAA,EAAAlD,CAAAmD,EAAAC,EAAAC,KAAA,SAAAqM,IAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAA7M,EAAAC,EAAAG,KAAA,SAAA0M,GAAA,cAAAA,EAAAxM,KAAAwM,EAAAvM,MAAA,OAAAiM,GAAA,EAAAC,GAAA,EAAAC,OAAAvI,EAAA2I,EAAAxM,KAAA,EAAAqM,EAAA3M,EAAAC,EAAAC,KAAA,SAAAyM,IAAA,IAAAhL,EAAAkJ,EAAAkC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA1I,EAAA2I,EAAAzJ,EAAA0H,EAAA,OAAArL,EAAAC,EAAAG,KAAA,SAAAiN,GAAA,cAAAA,EAAA/M,KAAA+M,EAAA9M,MAAA,OAuJgBoB,EAvJhBkL,EAAA7N,MAwJkB6L,EAAkB,IAAItE,IAxJxCwG,GAAA,EAAAC,GAAA,EAAAC,OAAA9I,EAAAkJ,EAAA/M,KAAA,EAAA4M,EA0J2BvL,EAAIiC,SA1J/BU,OAAAC,YAAA,UAAAwI,GAAAI,EAAAD,EAAA3M,QAAAiE,KAAA,CAAA6I,EAAA9M,KAAA,gBA0JoBkE,EA1JpB0I,EAAAnO,MAAAqO,EAAA9M,KAAA,GA2JuCC,EAAQC,MAAMC,OAAO+D,EAAIkD,eA3JhE,QA2JsB1I,EA3JtBoO,EAAAxM,KA4JgB,IACU8C,EAAUR,EAAmBlE,EAAUwF,EAAImD,kBACjDnD,EAAIU,aAAexB,EACrB,MAAMxE,GACJC,QAAQC,MAAR,WAAAC,OAAyBmF,EAAIqC,WAAWwG,UAAxC,gBACAzC,EAAgBW,IAAI/G,GAjKxC,QAAAsI,GAAA,EAAAM,EAAA9M,KAAA,gBAAA8M,EAAA9M,KAAA,iBAAA8M,EAAA/M,KAAA,GAAA+M,EAAAxD,GAAAwD,EAAA,SAAAL,GAAA,EAAAC,EAAAI,EAAAxD,GAAA,QAAAwD,EAAA/M,KAAA,GAAA+M,EAAA/M,KAAA,GAAAyM,GAAA,MAAAG,EAAAvI,QAAAuI,EAAAvI,SAAA,WAAA0I,EAAA/M,KAAA,IAAA0M,EAAA,CAAAK,EAAA9M,KAAA,eAAA0M,EAAA,eAAAI,EAAAvD,OAAA,mBAAAuD,EAAAvD,OAAA,YAqKkBuB,EAAgB1J,EAAIiC,SAASgB,OAAO,SAACH,GAAD,OAAUoG,EAAgBxN,IAAIoH,KACxE9C,EAAIiC,SAAWyH,EAtK3B,yBAAAgC,EAAAvM,SAAA6L,EAAA,mCAAAC,EAuJuB7P,KAAK6E,KAvJ5B0C,OAAAC,YAAA,UAAAiI,GAAAK,EAAAD,EAAArM,QAAAiE,KAAA,CAAAsI,EAAAvM,KAAA,gBAAAuM,EAAApB,cAAAiB,IAAA,eAAAH,GAAA,EAAAM,EAAAvM,KAAA,gBAAAuM,EAAAvM,KAAA,iBAAAuM,EAAAxM,KAAA,GAAAwM,EAAArB,GAAAqB,EAAA,SAAAL,GAAA,EAAAC,EAAAI,EAAArB,GAAA,QAAAqB,EAAAxM,KAAA,GAAAwM,EAAAxM,KAAA,GAAAkM,GAAA,MAAAI,EAAAjI,QAAAiI,EAAAjI,SAAA,WAAAmI,EAAAxM,KAAA,IAAAmM,EAAA,CAAAK,EAAAvM,KAAA,eAAAmM,EAAA,eAAAI,EAAAhD,OAAA,mBAAAgD,EAAAhD,OAAA,6BAAAgD,EAAAhM,SAAAyL,EAAAxP,KAAA,wDAAAuP,EAAA3N,MAAA5B,KAAA6B,YAAA,KAAAG,IAAA,kBAAAC,MAAA,WA0K8B,IAAAuO,GAAA,EAAAC,GAAA,EAAAC,OAAAtJ,EAAA,IAGtB,QAAAuJ,EAAAC,EAAe5Q,KAAK6E,KAApB0C,OAAAC,cAAAgJ,GAAAG,EAAAC,EAAApN,QAAAiE,MAAA+I,GAAA,EAA0B,KAAlB5L,EAAkB+L,EAAA1O,MAAA4O,GAAA,EAAAC,GAAA,EAAAC,OAAA3J,EAAA,IACtB,QAAA4J,EAAAC,EAAerM,EAAIiC,SAAnBU,OAAAC,cAAAqJ,GAAAG,EAAAC,EAAAzN,QAAAiE,MAAAoJ,GAAA,EAA6B,KAArBnJ,EAAqBsJ,EAAA/O,MACpByF,EAAIU,aAITV,EAAIU,aAAckH,aAAa,UAAW1K,EAAIG,IAH1C1C,QAAQC,MAAM,6FAHA,MAAAF,GAAA0O,GAAA,EAAAC,EAAA3O,EAAA,YAAAyO,GAAA,MAAAI,EAAArJ,QAAAqJ,EAAArJ,SAAA,WAAAkJ,EAAA,MAAAC,KAHJ,MAAA3O,GAAAqO,GAAA,EAAAC,EAAAtO,EAAA,YAAAoO,GAAA,MAAAI,EAAAhJ,QAAAgJ,EAAAhJ,SAAA,WAAA6I,EAAA,MAAAC,MA1K9B,CAAA1O,IAAA,oBAAAC,MAAA,WAwLgC,IAAAiP,GAAA,EAAAC,GAAA,EAAAC,OAAAhK,EAAA,IAExB,QAAAiK,EAAAC,EAAiBtR,KAAK6E,KAAtB0C,OAAAC,cAAA0J,GAAAG,EAAAC,EAAA9N,QAAAiE,MAAAyJ,GAAA,EAA4B,CAAAG,EAAApP,MACpBsP,eAHgB,MAAAnP,GAAA+O,GAAA,EAAAC,EAAAhP,EAAA,YAAA8O,GAAA,MAAAI,EAAA1J,QAAA0J,EAAA1J,SAAA,WAAAuJ,EAAA,MAAAC,MAxLhC,CAAApP,IAAA,OAAAvB,IAAA,WA8DQ,IAAKT,KAAKiL,MACN,MAAM,IAAIxI,MAAJ,6BAEV,OAAOzC,KAAKiL,UAjEpBD,EAAA,GAAaA,EAMMqE,iBAAmB,MCjK/BmC,aAMF,SAAAA,IAAuB1R,OAAAC,EAAA,EAAAD,CAAAE,KAAAwR,GAAAxR,KALP0D,WAKM,EAAA1D,KAJN2G,cAIM,EAAA3G,KAHNyR,YAGM,EAClBzR,KAAK0D,MAAQ,IAAI7D,EACjBG,KAAK2G,SAAW,CACZ,IAAInF,EAAgB,OAAQ,OAAQ,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,KAChE,IAAIA,EAAgB,OAAQ,OAAQ,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,KAChE,IAAIA,EAAgB,OAAQ,OAAQ,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,KAChE,IAAIA,EAAgB,SAAU,SAAU,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,KACpE,IAAIyC,EAAU,KAAM,KAAM,CAAC,EAAG,EAAG,EAAG,MAGxCjE,KAAKyR,OAAS,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAAItJ,IAAI,SAACuJ,GAAD,OAAO,IAAI1G,EAAM0G,4DAGrDlP,GACd,IAAMsI,EAAK9K,KAAK2G,SAAS7B,KAAK,SAACgG,GAAD,OAAQA,EAAGtI,OAASA,IAElD,IAAKsI,EACD,MAAM,IAAIrI,MAAJ,sBAAAF,OAAgCC,IAE1C,OAAOsI,mCAGK5F,GACZ,IAAMX,EAAQvE,KAAKyR,OAAO3M,KAAK,SAAC6M,GAAD,OAAQA,EAAGtN,cAAgBa,IAE1D,IAAIX,EACA,MAAM,IAAI9B,MAAJ,8BAAAF,OAAwC2C,IAElD,OAAOX,WAlCTiN,EAIYI,SAAW,IAAIJ,EAkClC,IACe/N,EADC+N,EAAaI,SClCdC,0LANP,IAAMC,EAAO,UAAAvP,OAAavC,KAAK+R,MAAM3N,QAAQ5B,MAE7C,OAAOwP,EAAA9O,EAAA+E,cAAA,QAAMgK,UAAWH,WAJPI,IAAMC,YCuDhBC,6MApCXC,MAAQ,CACJC,kBAAmB,GACnBlO,aAASgD,KAGbmL,kBAAoB,WAChB,IAAM5L,EAAWlD,EAAQkD,SAASwB,IAAI,SAAC2C,EAAI0H,GAAL,MAAgB,CAAExQ,IAAKwQ,EAAOvQ,MAAO6I,EAAGtI,KAAMiQ,MAAOT,EAAA9O,EAAA+E,cAAA,aAAO+J,EAAA9O,EAAA+E,cAACyK,EAAD,CAAYtO,QAAU0G,IAAOA,EAAGnI,SAElItC,EAAKsS,SAAS,CAAEL,kBAAmB3L,OAGvCiM,eAAiB,SAACC,GACd,IAAMzO,EAAUX,EAAQkD,SAAS7B,KAAK,SAACgG,GAAD,OAAQA,EAAGtI,OAASqQ,EAAe5Q,QACrEmC,EAKJ/D,EAAK0R,MAAMe,kBAAkB1O,GAJzB/B,QAAQ0Q,KAAR,uCAAAxQ,OAAoDsQ,EAAe5Q,iFASvE,OACA+P,EAAA9O,EAAA+E,cAAA,WACI+J,EAAA9O,EAAA+E,cAAA,iCACA+J,EAAA9O,EAAA+E,cAAC+K,EAAA,EAAD,CACIf,UAAU,eACVgB,SAAUjT,KAAK4S,eACfM,QAASlT,KAAKqS,MAAMC,4BA/BNJ,IAAMC,4BCUrBgB,mLAnBT,IAAIC,EAAM,GACNC,EAAa,GAOjB,OALGrT,KAAK+R,MAAMuB,UACXF,EAAG,IAAA7Q,OAAOvC,KAAK+R,MAAMuB,QAAlB,KACHD,EAAU,KAAA9Q,OAAQvC,KAAK+R,MAAMuB,QAAnB,MAIVtB,EAAA9O,EAAA+E,cAAA,OAAKgK,UAAS,mBAAA1P,OAAqBvC,KAAK+R,MAAMqB,KAAOG,eAAcvT,KAAK+R,MAAMqB,KAE1EI,IAAgBJ,GAChBpT,KAAK+R,MAAM7J,SACXsL,IAAgBH,WAhBCnB,IAAMC,WCarBsB,0LAbP,IAAI3B,EAAU,YAKd,OAJK9R,KAAK+R,MAAM2B,WACZ5B,GAAW,YAIXE,EAAA9O,EAAA+E,cAAA,QAAMgK,UAAWH,GACX9R,KAAK+R,MAAM3Q,aAVF8Q,IAAMC,YC4ClBwB,6MAtCZC,QAAU,WACHvT,EAAK0R,MAAM8B,gBAAkBxT,EAAK0R,MAAM+B,YACzCzT,EAAK0R,MAAM+B,WAAWzT,EAAK0R,MAAMnN,8EAKpC,IAAI5E,KAAK+R,MAAM8B,eACZ,OAAO7B,EAAA9O,EAAA+E,cAAA,OAAKgK,UAAU,sBAAuBjS,KAAK+R,MAAM7J,UAG3D,IAAM6L,EAAY/T,KAAK+R,MAAMnN,IAAIkE,GAAK,EAEhCkL,EAAY,qCAAAzR,OADHwR,EAAY,EAAK,EAAKA,EAAY,GAAM,EAAI,GAIrDhJ,EAAS/K,KAAK+R,MAAMnN,IAAIqP,eAAejU,KAAK+R,MAAM3N,SACpD8P,EAAqB,GAXnBjN,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAYN,QAAAC,EAAAC,EAAmByD,EAAnBxD,OAAAC,cAAAP,GAAAI,EAAAC,EAAA9D,QAAAiE,MAAAR,GAAA,EAA2B,KAClBkN,EADkB9M,EAAApF,MACA0E,SAASwB,IAAI,SAAC2C,GAAD,OAAQkH,EAAA9O,EAAA+E,cAACyK,EAAD,CAAYtO,QAAU0G,OACnEoJ,EAAcA,EAAY3R,OAAO4R,IACrBhO,KAAK6L,EAAA9O,EAAA+E,cAAA,QAAMgK,UAAU,oBAf9B,MAAA7P,GAAA8E,GAAA,EAAAC,EAAA/E,EAAA,YAAA6E,GAAA,MAAAK,EAAAM,QAAAN,EAAAM,SAAA,WAAAV,EAAA,MAAAC,GAmBN,OADA9E,QAAQ+R,IAAI,eAAgBF,GAEzBlC,EAAA9O,EAAA+E,cAAA,OAAKgK,UAAU,cAAc2B,QAAU5T,KAAK4T,SACzC5B,EAAA9O,EAAA+E,cAAA,OAAKgK,UAAW+B,GACXhU,KAAK+R,MAAM7J,UAEhB8J,EAAA9O,EAAA+E,cAAA,OAAKgK,UAAU,oBACViC,WAhCWhC,IAAMC,WCLrBkC,EAAb,WAGI,SAAAA,EAAoBR,EAAiCH,EAA2BtP,EAA2Bc,GAAgBpF,OAAAC,EAAA,EAAAD,CAAAE,KAAAqU,GAAArU,KAAA6T,iBAAA7T,KAAA0T,WAAA1T,KAAAoE,UAAApE,KAAAkF,QAH/H,OAAApF,OAAAiC,EAAA,EAAAjC,CAAAuU,EAAA,EAAArS,IAAA,aAAAC,MAAA,SAMuBqS,GACf,MAAe,MAAXA,EACO,IACW,SAAXA,EACA,UADJ,IATf,CAAAtS,IAAA,kBAAAC,MAAA,SAgB4BgE,GAIpB,IAHA,IAAMsO,EAAkBtO,EAAagD,WAC/BuL,EAAkB,GAEf9C,EAAI,EAAGA,EAAI6C,EAAehO,OAAQmL,IAAK,CAC5C,IAAI/O,EAAO4R,EAAe7C,GAAG+C,SAChB,WAAT9R,IACAA,EAAO,MAEX6R,EAAW7R,GAAQ4R,EAAe7C,GAAGgD,UAGzC,OAAOF,IA5Bf,CAAAxS,IAAA,oBAAAC,MAAA,SA+B6BgE,EAAY6N,GACjC,IAAMa,EAA6B,GAEnC,GAAI1O,EAAK2O,gBACL,IAAK,IAAIlD,EAAI,EAAGA,EAAIzL,EAAK4O,WAAWtO,OAAQmL,IAAK,CAC7C,IAAMoD,EAAY7O,EAAK4O,WAAWnD,GAC9BqD,OAA0B3N,EAC9B,GAA2B,IAAvB0N,EAAUE,SACVD,EAAe/U,KAAKiV,kBAAkBH,EAAWhB,QAC9C,GAA2B,IAAvBgB,EAAUE,SAAgB,CACjC,IAAI5T,EAAO0T,EAAUI,aAAe,IACpC9T,EAAOA,EAAK+T,UAERJ,EAAe7C,IAAMjK,cAAcwL,EAAc,CAC7CrS,KAAM0T,EAAUI,aAAe,GAC/BxB,SAAU1T,KAAK0T,SACfG,eAAgB7T,KAAK6T,eACrB7R,IAAKqS,EAAa7B,gBAI1BnQ,QAAQ0Q,KAAK,qCAAsC+B,GAGnDC,GACAJ,EAAcxO,KAAK4O,GAM/B,IAAMK,EAAWpV,KAAKqV,gBAAgBpP,GAGlC8L,EAAa,CACbqB,IAAKnN,EAAKwO,SACVzS,IAAKqS,EAAa7B,QAClBc,QAAStT,KAAKsV,WAAWrP,EAAKwO,UAC9Bf,SAAU1T,KAAK0T,SACfG,eAAgB7T,KAAK6T,eACrBuB,SAAUA,GAGVG,EAA0BrD,IAAMjK,cAAckL,EAAiBpB,EAAO4C,GAE1E,GAAI3U,KAAKkF,OAASlF,KAAK6T,gBAAkBuB,EAAS,WAAY,CAC1D,IAAMxQ,EAAM5E,KAAKkF,MAAMsQ,OAAOJ,EAAS,YAGvCG,EAAerD,IAAMjK,cAAc0L,EAAe,CAC9C3R,IAAKqS,EAAa7B,QAClBqB,eAAgB7T,KAAK6T,eACrBH,SAAU1T,KAAK0T,SACftP,QAASpE,KAAKoE,QACd0P,aACAlP,OACJ,CAAC2Q,IAGL,OAAOA,MA1FflB,EAAA,GAAaA,EACM7B,MAAQ,MC4CZiD,6MApCXpD,MAAQ,CACJzL,aAASQ,KAiBbsO,cAAgB,WACZ,IAAMC,EAAOtV,EAAK0R,MAAM7M,MAAMV,KAGxB+Q,EADY,IAAIlB,EAAahU,EAAK0R,MAAM8B,eAAgBxT,EAAK0R,MAAM2B,SAAUrT,EAAK0R,MAAM3N,QAAS/D,EAAK0R,MAAM7M,OACnF+P,kBAAkBU,EAAMtV,EAAK0R,MAAM+B,YAElEzT,EAAKsS,SAAU,CAAE/L,QAAS2O,wFAnB1BvV,KAAK0V,2DAGUE,GACXA,GACA5V,KAAK+R,MAAM7M,QAAU0Q,EAAU1Q,OAC/BlF,KAAK+R,MAAM3N,UAAYwR,EAAUxR,SACjCpE,KAAK+R,MAAM2B,WAAakC,EAAUlC,UAClC1T,KAAK+R,MAAM8B,iBAAmB+B,EAAU/B,gBACxC7T,KAAK0V,iDAcT,OACI1D,EAAA9O,EAAA+E,cAAA,OAAKgK,UAAU,iBACTjS,KAAKqS,MAAMzL,gBA/BFsL,IAAMC,6CCoFlB0D,6MA5EXxD,MAAQ,CACJyD,WAAYzV,EAAK0R,MAAM7M,MACvB2N,oBAAgBzL,EAChB2O,gBAAiB,GACjBC,aAAa,EACbC,aAAa,KAejBC,eAAiB,SAACrD,GACd,IAAM3N,EAAQkE,SAASyJ,EAAe5Q,OAChCuQ,EAAQnS,EAAKgS,MAAM0D,gBAAgBI,UAAU,SAACC,GAAD,OAASA,EAAInU,QAAUiD,EAAMmR,aAChFhW,EAAKsS,SAAS,CAAEmD,WAAYtD,EAAOK,mBAEnCxS,EAAK0R,MAAMuE,gBAAgBpR,MAG/BqR,YAAc,SAACC,GACXnW,EAAKsS,SAAU,CAACqD,aAAa,EAAOC,aAAa,IACjD,IACMQ,EADQpW,EAAKgS,MAAMyD,WAAa,EACbU,EAMzB,GALiB,IAAbC,EACApW,EAAKsS,SAAU,CAACqD,aAAa,IACtBS,IAAapW,EAAKgS,MAAM0D,gBAAgBxP,QAC/ClG,EAAKsS,SAAU,CAACsD,aAAa,KAEqB,IAAlD5V,EAAK0R,MAAM3N,QAASxB,OAAO+E,QAAQ8O,GAAvC,CAGA,IAAMC,EAAYrW,EAAKgS,MAAM0D,gBAAgBjR,KAAK,SAACsR,GAAD,OAASA,EAAInU,QAAUwU,EAASJ,aAC7EK,GACDrU,QAAQC,MAAM,4BAElBjC,EAAKsS,SAAS,CAAEmD,WAAYW,EAAW,EAAG5D,eAAgB6D,IAC1DrW,EAAK0R,MAAMuE,gBAAiBG,uFArCbb,GACf,GAAI5V,KAAK+R,MAAM3N,UAAYwR,EAAUxR,QAAS,CAC1C,IAAIxB,EAAS,GACb,GAAI5C,KAAK+R,MAAM3N,QAAS,CACpBxB,EAAS5C,KAAK+R,MAAM3N,QAAQxB,OAAOuF,IAAI,SAACwO,GAAD,MAAQ,CAAE1U,MAAO0U,EAAEN,WAAY5D,MAAOkE,EAAEN,cAC/E,IAAMO,EAAa5W,KAAK+R,MAAM3N,QAAQxB,OAAO,GAC7C5C,KAAK2S,SAAU,CAAEoD,gBAAiBnT,EAAQkT,WAAY,EAAGjD,eAAgBjQ,EAAO,KAChF5C,KAAK+R,MAAMuE,gBAAgBM,sCAiC9B,IAAAtN,EAAAtJ,KACL,OACIgS,EAAA9O,EAAA+E,cAAA,WACKjI,KAAK+R,MAAM3N,QACZ4N,EAAA9O,EAAA+E,cAAA,WACI+J,EAAA9O,EAAA+E,cAAA,OAAKgK,UAAU,WACXD,EAAA9O,EAAA+E,cAAA,iCACA+J,EAAA9O,EAAA+E,cAAC+K,EAAA,EAAD,CACIf,UAAU,eACVgB,SAAUjT,KAAKkW,eACfhD,QAASlT,KAAKqS,MAAM0D,gBACpB9T,MAAOjC,KAAKqS,MAAMQ,kBAI1Bb,EAAA9O,EAAA+E,cAAA,OAAKgK,UAAU,0BACXD,EAAA9O,EAAA+E,cAAA,UAAQ2L,QAAS,kBAAMtK,EAAKiN,aAAa,IAAItE,UAAWjS,KAAKqS,MAAM2D,YAAc,iBAAkB,GAC/Fa,SAAU7W,KAAKqS,MAAM2D,aAAahE,EAAA9O,EAAA+E,cAAA,OAAK6O,IAAKC,IAAKC,IAAKD,OAAgB/E,EAAA9O,EAAA+E,cAAA,iCAC1E+J,EAAA9O,EAAA+E,cAAA,SAAOgK,UAAU,iBAAjB,gBAAqDD,EAAA9O,EAAA+E,cAAA,UAAQgK,UAAWjS,KAAKqS,MAAM4D,YAAc,iBAAkB,GAAIrC,QAAS,kBAAMtK,EAAKiN,YAAY,IACnJM,SAAU7W,KAAKqS,MAAM4D,aAAajE,EAAA9O,EAAA+E,cAAA,OAAK6O,IAAKtT,IAAMwT,IAAKxT,SAGjE,WAxEG0O,IAAMC,oCCuBZ8E,mLA9BP,IAAMtQ,EAAWlD,EAAQkD,SAASwB,IAAI,SAAC+O,EAAG1E,GAAJ,OAClCR,EAAA9O,EAAA+E,cAAA,SAAOjG,IAAKwQ,EAAOP,UAAU,iBAAgBD,EAAA9O,EAAA+E,cAACyK,EAAD,CAAYtO,QAAS8S,IAAKA,EAAEvU,QAC7E,OACIqP,EAAA9O,EAAA+E,cAAA,WACI+J,EAAA9O,EAAA+E,cAAA,UAAQgK,UAAU,gBACdD,EAAA9O,EAAA+E,cAAA,OAAKlD,GAAG,2BACH4B,GAELqL,EAAA9O,EAAA+E,cAAA,OAAKlD,GAAG,iBACH/E,KAAK+R,MAAM3N,QACZ4N,EAAA9O,EAAA+E,cAAA,UAAKjI,KAAK+R,MAAM3N,QAAQzB,KAAxB,YACEqP,EAAA9O,EAAA+E,cAAA,sBAEN+J,EAAA9O,EAAA+E,cAAA,OAAKlD,GAAG,2BACJiN,EAAA9O,EAAA+E,cAAA,mCACA+J,EAAA9O,EAAA+E,cAAA,OAAK6O,IAAKrS,IAAYuS,IAAKvS,QAInCuN,EAAA9O,EAAA+E,cAAA,MAAIgK,UAAU,SACdD,EAAA9O,EAAA+E,cAAA,OAAKgK,UAAU,gBACXD,EAAA9O,EAAA+E,cAAA,yBACA+J,EAAA9O,EAAA+E,cAAA,mBACA+J,EAAA9O,EAAA+E,cAAA,kCA1BCiK,IAAMC,WC0DZgF,6MAtDX9E,MAAQ,CACJwB,gBAAgB,EAChBH,UAAU,KAcd0D,mBAAqB,WACjB,IAAMC,GAAWhX,EAAKgS,MAAMwB,eAC5BxT,EAAKsS,SAAU,CAAEkB,eAAgBwD,IACjChX,EAAK0R,MAAMqF,mBAAmBC,MAGlCC,cAAgB,WACZ,IAAMC,GAAelX,EAAKgS,MAAMqB,SAChCrT,EAAKsS,SAAU,CAAEe,SAAU6D,IAC3BlX,EAAK0R,MAAMuF,cAAcC,sFApBV3B,GACX5V,KAAK+R,MAAM8B,iBAAmB7T,KAAKqS,MAAMwB,gBACzC7T,KAAK2S,SAAU,CAAEkB,eAAgB7T,KAAK+R,MAAM8B,iBAG7C7T,KAAK+R,MAAM2B,WAAa1T,KAAKqS,MAAMqB,UAClC1T,KAAK2S,SAAU,CAAEe,SAAU1T,KAAK+R,MAAM2B,4CAkB1C,OACA1B,EAAA9O,EAAA+E,cAAA,WACI+J,EAAA9O,EAAA+E,cAAA,SAAOgK,UAAU,iBAAjB,kBACAD,EAAA9O,EAAA+E,cAAA,SAAOgK,UAAU,iBACbD,EAAA9O,EAAA+E,cAAA,SACItF,KAAK,YACL6U,KAAK,WACLC,QAASzX,KAAKqS,MAAMwB,eACpBZ,SAAUjT,KAAKoX,qBALvB,gBASApF,EAAA9O,EAAA+E,cAAA,SAAOgK,UAAU,iBACbD,EAAA9O,EAAA+E,cAAA,SACItF,KAAK,OACL6U,KAAK,WACLC,QAASzX,KAAKqS,MAAMqB,SACpBT,SAAUjT,KAAKsX,gBALvB,oBA3CkBpF,IAAMC,WCgBrBuF,0LAnBP,IACMC,EADe3X,KAAK+R,MAAM/J,MAAMrB,SAASwB,IAAI,SAAC2C,GAAD,OAAQA,EAAGnI,OACnCiV,KAAK,MAC1BC,EAAO7X,KAAK+R,MAAM/J,MAAMrB,SAASwB,IAAI,SAAC2C,GAAD,OAAQkH,EAAA9O,EAAA+E,cAACyK,EAAD,CAAYtO,QAAS0G,MAGlEgN,EADY,IAAIzD,GAAa,GAAO,GAChBY,kBAAkBjV,KAAK+R,MAAM/J,MAAMpB,SAE7D,OACIoL,EAAA9O,EAAA+E,cAAA,OAAKgK,UAAU,iBACXD,EAAA9O,EAAA+E,cAAA,OAAKgK,UAAU,sBAAuB4F,GACtC7F,EAAA9O,EAAA+E,cAAA,OAAKgK,UAAU,uBAAwB0F,GACvC3F,EAAA9O,EAAA+E,cAAA,OAAKgK,UAAU,yBACT6F,WAdc5F,IAAMC,YCgB3B4F,mLAZP,IAAMhN,EAAS/K,KAAK+R,MAAMnN,IAAImG,OAAO5C,IAAI,SAACwB,GAAD,OACrCqI,EAAA9O,EAAA+E,cAAC+P,EAAD,CAAuBhQ,MAAO2B,MAElC,OACIqI,EAAA9O,EAAA+E,cAAA,OAAKgK,UAAU,YACXD,EAAA9O,EAAA+E,cAAA,MAAIgK,UAAU,wBACZlH,UARMmH,IAAMC,WCmHf8F,6MArGX5F,MAAQ,CACJ6F,SAAS,EACThT,WAAOkC,EACPhD,aAASgD,EACT/C,YAAa,EAEbwP,gBAAgB,EAChBH,UAAU,EACV9O,SAAKwC,KAIT+Q,iDAAa,SAAA/U,EAAOiB,GAAP,IAAAa,EAAA,OAAAjC,EAAAC,EAAAG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACTnD,EAAKsS,SAAU,CAACuF,SAAS,EAAMhT,WAAOkC,IAEjC/G,EAAKgS,MAAMjO,QAHP,CAAAd,EAAAE,KAAA,cAIC,IAAIf,MAAM,8CAJX,cAAAa,EAAAE,KAAA,EAMWW,EAAMiU,KAAK/X,EAAKgS,MAAMjO,QAASC,GAN1C,OAMHa,EANG5B,EAAAQ,KAOTzD,EAAKsS,SAAU,CAACuF,SAAS,EAAOhT,UAPvB,wBAAA5B,EAAAS,SAAAX,8DAUbiV,aAAe,SAACjU,GACZ/D,EAAKsS,SAAU,CAACvO,YAChB/B,QAAQ+R,IAAI,kCAAmC/T,EAAKgS,MAAMjO,YAE9DkU,YAAc,SAACC,GACXlY,EAAKsS,SAAU,CAAEkB,eAAgB0E,OAErCC,OAAS,SAACD,GACNlY,EAAKsS,SAAU,CAAEe,SAAU6E,OAG/BzE,WAAa,SAAClP,GACVvE,EAAKsS,SAAU,CAAC/N,iFAIhB,OACIoN,EAAA9O,EAAA+E,cAAA,WAASlD,GAAG,UACRiN,EAAA9O,EAAA+E,cAAA,OAAKlD,GAAG,oBACJiN,EAAA9O,EAAA+E,cAACwQ,EAAD,CACAzW,IAAK,EACL2E,SAAUlD,EAAQkD,SAClBvC,QAASpE,KAAKqS,MAAMjO,QACpB0O,kBAAmB9S,KAAKqY,eAGxBrG,EAAA9O,EAAA+E,cAACyQ,EAAD,CACA1W,IAAK,EACLoC,QAASpE,KAAKqS,MAAMjO,QACpBc,MAAOlF,KAAKqS,MAAMhO,YAClBiS,gBAAiBtW,KAAKmY,aAEtBnG,EAAA9O,EAAA+E,cAAC0Q,EAAD,CACA9E,eAAgB7T,KAAKqS,MAAMwB,eAC3BH,SAAU1T,KAAKqS,MAAMqB,SACrB0D,mBAAoBpX,KAAKsY,YACzBhB,cAAetX,KAAKwY,UAIxBxG,EAAA9O,EAAA+E,cAAC2Q,EAAD,CACAxU,QAASpE,KAAKqS,MAAMjO,UAEpB4N,EAAA9O,EAAA+E,cAAA,OAAKlD,GAAG,mBAAmBkN,UAAU,gBACjCD,EAAA9O,EAAA+E,cAAA,SAAOlD,GAAG,uBAER/E,KAAKqS,MAAMnN,OAASlF,KAAKqS,MAAMjO,QACjC4N,EAAA9O,EAAA+E,cAAC4Q,EAAD,CACA3T,MAAOlF,KAAKqS,MAAMnN,MAClBd,QAASpE,KAAKqS,MAAMjO,QACpByP,eAAgB7T,KAAKqS,MAAMwB,eAC3BH,SAAU1T,KAAKqS,MAAMqB,SACrBI,WAAY9T,KAAK8T,aAAgB9B,EAAA9O,EAAA+E,cAAA,YACjC+J,EAAA9O,EAAA+E,cAAA,SAAOlD,GAAG,qBACJ/E,KAAKqS,MAAMzN,IAAMoN,EAAA9O,EAAA+E,cAAC6Q,EAAD,CAAWlU,IAAK5E,KAAKqS,MAAMzN,IAAMR,QAASpE,KAAKqS,MAAMjO,UAAc,KAI9F4N,EAAA9O,EAAA+E,cAAA,MAAIgK,UAAU,SACdD,EAAA9O,EAAA+E,cAAA,UAAQlD,GAAG,8BACPiN,EAAA9O,EAAA+E,cAAA,YAEA+J,EAAA9O,EAAA+E,cAACwQ,EAAD,CACAzW,IAAK,EACL2E,SAAUlD,EAAQkD,SAClBvC,QAASpE,KAAKqS,MAAMjO,QACpB0O,kBAAmB9S,KAAKqY,eAExBrG,EAAA9O,EAAA+E,cAACyQ,EAAD,CACA1W,IAAK,EACLoC,QAASpE,KAAKqS,MAAMjO,QACpBc,MAAOlF,KAAKqS,MAAMhO,YAClBiS,gBAAiBtW,KAAKmY,sBA/FrBjG,IAAMC,WCTZ4G,mLATX,OACE/G,EAAA9O,EAAA+E,cAAA,WACE+J,EAAA9O,EAAA+E,cAAA,OAAKgK,UAAU,OACbD,EAAA9O,EAAA+E,cAAC+Q,EAAD,eALQ9G,IAAMC,WCOJ8G,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAAShL,MACvB,2DCZNiL,IAASC,OAAOtH,EAAA9O,EAAA+E,cAACsR,EAAD,MAASrX,SAASsX,eAAe,SDmI3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAM9Y,KAAK,SAAA+Y,GACjCA,EAAaC","file":"static/js/main.02a7cf65.chunk.js","sourcesContent":["module.exports = \"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAwCAYAAAC4wJK5AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGuSURBVGhD7ZjPqwFRGIbv/07SxEZSLCwUCws1KRYWaiwsLCwoiaKYsrCgKAt6b+fm3G7u5/IxZ+Y7t3nqKdnM+5QfZ+YD/4A4QgpxhBTiCCnEEVIQG7Fer6+vHiMuYjKZoFgsYj6fX995jJiIzWaDer2ORCLxpVURp9MJnU7ne7x1EYPBAJlM5leAFRGz2QzlcpkcrxUbsd1u0Wg0yNG3iou4XC7odrvk2HuKihgOh8jlcuTQvxQRsVwuUalUyIHPGGnEfr9Hs9kkh3GMLKLX6yGVSpGjuIYeMR6PUSgUyDGvGlqE7/uo1WrkiHc1HnE8HtFut8mLB6XRiH6/D8dxyAsHqZGI6XSKUqlEXtCEgUeo40IQP5scjX2c3v0D42j8i/3qUYKj8QjF+XxmH+o4hhKh4RyvOYYaoXnmRodjJBEadcuZzWbJYRwjjVDcu/nnGHmE5vYxDEcxERr9QIwae09xERp17kqn0+ToW8VGKA6HA1qtFjn8p6IjNKvVCtVqlQxQWhGhGY1GyOfzdkdoPM9DMpm0O0Kx2+3guq7dEZrFYmF/BJc4QgpxhAyAT37H75LDLfRTAAAAAElFTkSuQmCC\"","module.exports = \"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAtCAYAAAA+7zKnAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGhSURBVGhD7Zixq4JAHMff/55IkINDg0NBg0OIi1AigYOBgkRLECEOEkENDUUOBQ2/h/G76T3eS7273wV+4Avq3f1+n0W88ws+mE6eik6eilryRVHglRrUkt/tdjAajSDLMnxCS235Xq/3iuu6cD6fcYSGxvIsYRjC8/nEGXJpLV/FNE1Yr9c4Sx5c5Fkmk4nUl5qrPIvneXC5XHCVOITIsyyXS1wpBqHyVYbDIWw2G6zAF+HyLLZtw+FwwEp8kCbP4vs+lGWJFdshXb5Kv9+HJEmwanNI5Fksy3rVbAqpPIvjOHA6nbDL+yghz7JYLODxeGC3/1FKvophGLBarbDj3ygnzzIejyHPc+z8O8rKV5nP53C9XrH7T5SUf/eDppR83a2EEvKapkEURdjlfcjl22yfyeR5HFyky/M8MkqV531YlyIv6jeJUHnRP6iEyA8GA0jTFFeJg7t8EARwv99xhVi4yU+nUzgejzhTDq3lq9PQdrvFGXJpLK/rOsRxjCM0NJKfzWZwu93wKR215ff7Pd7RU0teNTp5Kjp5Kj5YHuAbGi0/JXQ9+WUAAAAASUVORK5CYII=\"","module.exports = \"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAOwAAAAtCAYAAACtZ4cFAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAIVSURBVHhe7dhZSwJxFIbxvv9niTaoiwqKQmmhpKIyUymVVivqQkWDk22mNXnO4DZn5nngvRmYu/+PWaaEiNwEWCJHAZbIUYAlchRgiRwFWCJHAZbIUYAlmnCNRkOeHh/kqlKRfO7s62pwgCUace8gH7tAHmb2ZTudkrXVZVmcn5WFmenO9nd3vu4KDrBEA9YP5NLCXA9IbYAlGrBhgtQGWCKlcYLUBlhKfFECqQ2wFPs8gdQGWHJfnEBqAyxFvh+Q5diD1AZYmnj/glxJHkhtgKWR12w25eXlWar3d1Ipl6RYOJeT4yPJ7O1IanNdUhvrgYeT/R1gaeB+gyzkcx2QW+nNT5T9BljzAEtq/Z6QJpDaAGseYGn0ILUB1jzAJqCJg9QGWPMAG4MiD1IbYM0DrIPcg9QGWPMAG4FiD1IbYM0D7BhKPEhtgDUPsEPotdWSWq32gfKhWpXzs9POYQSkYYA1D7CGfoO8vbmWSumy/aTMSy57KtmT4551g2WGAdY8wLYLC1IbYEMOsOYlAuywQWoDbMgB1rxYgB03SG2ADTnAmucCbCtiILUBNuQAa14kwHoDqQ2wIQdY88YC9h1kvV6PDUhtgA05wJo3FLCdb8jnZIDUBtiQA6x5ZrBBr6wXxSLrWhDYg8we67NvsMw2Fz+diMgWYIkcBVgiRwGWyFGAJXIUYIkcBVgiRwGWyFGAJXKTyBvf7jTa+8w6xgAAAABJRU5ErkJggg==\"","// This class holds a cache of XML documents, fetching them from the web if they are not there\r\n// Every piece of code uses this, so that we can load XMLs again and again without worried about performance\r\n//\r\n// NOTE: The cache contains parsed Documents. If you change the document, it's going to be changed everywhere.\r\n// This is on purpose - as we add attributes and tags for pointer resolution.\r\n\r\nexport default class XmlCache {\r\n    private  _xmls : Map<string, Document>;  // Map from URL to a parsed XML\r\n    private _promises: Map<string, Promise<Document>>;\r\n    private static documentCount = 0;\r\n\r\n    public constructor() {\r\n        this._xmls = new Map<string, Document>();\r\n        this._promises = new Map<string, Promise<Document>>();\r\n    }\r\n\r\n    public getXML(url: string): Promise<Document> {\r\n        // This function is async, but we implement the Promises ourselves, since we also cache promises\r\n        // This code only works because asynchronous Javascript is single threaded (note there are no locks)\r\n        if (this._xmls.has(url)) {\r\n            return Promise.resolve(this._xmls.get(url)!);\r\n        }\r\n\r\n        if (this._promises.has(url)) {\r\n            return this._promises.get(url)!;\r\n        }\r\n\r\n        const promise = this.fetchXML(url);\r\n        this._promises.set(url, promise);\r\n        promise.then(() => {\r\n            this._promises.delete(url);\r\n        });\r\n        return promise;\r\n    }\r\n\r\n    private parseXML(xml: string) {\r\n        const parser = new DOMParser();\r\n        const doc = parser.parseFromString(xml, \"text/xml\");\r\n    \r\n        return doc;\r\n    }\r\n    \r\n    private async fetchXML(url:string) {\r\n        const response = await fetch(url);\r\n        const xml = await response.text();\r\n    \r\n        const doc = this.parseXML(xml);\r\n        this._xmls.set(url, doc);\r\n\r\n        return doc\r\n    }\r\n}","import FvStore from \"./store\";\r\nimport { Spine } from \"./spine\";\r\n\r\nexport abstract class Edition {\r\n    public readonly code: string = ''; // 1818, 1823, 1831, Thomas, MS\r\n    public readonly name: string = '';\r\n    public readonly chunks: number[] = [];\r\n\r\n    constructor(code: string, name: string, chunks: number[]) {\r\n        this.code = code;\r\n        this.name = name;\r\n        this.chunks = chunks;\r\n    }\r\n\r\n    protected getChunkUrl(chunkId: number) {\r\n        const chunkStr = chunkId < 10 ? `0${chunkId}` : `${chunkId}`;\r\n        const url = `https://raw.githubusercontent.com/PghFrankenstein/fv-data/master/variorum-chunks/f${this.code}_C${chunkStr}.xml`;\r\n\r\n        return url;\r\n    }\r\n\r\n    public async getXML(chunkId: number) {\r\n        return await FvStore.cache.getXML(this.getChunkUrl(chunkId));\r\n    }\r\n\r\n    public abstract getRootElement(document: Document): Element;\r\n}\r\n\r\nexport class EditionWithBody extends Edition {\r\n    public getRootElement(document: Document): Element {\r\n        try {\r\n            return document.getElementsByTagName('body')[0];\r\n        } catch(err) {\r\n            console.error(`Can't located body element of ${this.code}: ${err}`);\r\n            throw new Error(\"Can't locate body element\");\r\n        }\r\n    }\r\n} \r\n\r\nexport class MSEdition extends EditionWithBody { }  // TODO: Add our own getRootElementW\r\n\r\nexport class Chunk {\r\n    public readonly edition: Edition;\r\n    public readonly chunkNumber: number;\r\n    public readonly tei: Document;\r\n    public readonly root: Element;\r\n    public readonly variations: Spine;\r\n\r\n    private constructor(edition: Edition, chunkNumber: number, tei: Document, spine: Spine) {\r\n        this.edition = edition;\r\n        this.chunkNumber = chunkNumber;\r\n        this.tei = tei;\r\n        this.variations = spine;\r\n        this.root = edition.getRootElement(tei);\r\n    }\r\n\r\n    public static async load(edition: Edition, chunkNumber: number): Promise<Chunk> {\r\n        const document = await edition.getXML(chunkNumber);\r\n        const spine = await FvStore.getSpine(chunkNumber);\r\n        await spine.initialize();\r\n\r\n        const chunk = new Chunk(edition, chunkNumber, document, spine);\r\n        chunk.addAppReferences();\r\n\r\n        return chunk;\r\n    }\r\n\r\n    public getApp(appRef: string) {\r\n        const app = this.variations.apps.find((a) => a.id === appRef);\r\n        if(!app) {\r\n            throw new Error(`Can't locate app ${appRef}`);\r\n        }\r\n        return app;\r\n    }\r\n\r\n    private addAppReferences() {\r\n    }\r\n}\r\n","\r\nexport function evaluateXPath(doc: Document, xpath: string): Node[] {\r\n    const resolver = doc.createNSResolver(doc.documentElement);\r\n    const xpathResult = doc.evaluate(xpath, doc, resolver);\r\n    const nodes: Node[] = [];\r\n\r\n    let node = xpathResult.iterateNext();\r\n    while(node) {\r\n        nodes.push(node);\r\n        node = xpathResult.iterateNext();\r\n    }\r\n\r\n    return nodes;\r\n}\r\n\r\nexport function findElementByXmlId(doc: Document, xmlId: string): Element {\r\n    const xpath = `//*[@xml:id=\"${xmlId}\"]`;\r\n    const idResults = evaluateXPath(doc, xpath);\r\n\r\n    if (idResults.length === 0) {\r\n        throw Error(`Pointer ${xmlId} references an invalid element`);\r\n    } else if (idResults.length > 1) {\r\n        throw Error(`Pointer ${xmlId} references more than one element`);\r\n    }\r\n    return idResults[0] as Element;\r\n}\r\n","import FvStore from \"./store\";\r\nimport { Edition } from \"./edition\";\r\nimport { evaluateXPath, findElementByXmlId } from \"../tei-processing/helpers\";\r\n\r\ninterface PointerData {\r\n    ptrElement: Element;\r\n    groupId: string;\r\n    edition: Edition;\r\n    referencedUrl: string;\r\n    referencedTarget: string;\r\n\r\n    dereferenced?: Element;\r\n}\r\n\r\n// async function debug1818(where: string) {\r\n//     const xml = await FvStore.getEdition('1818').getXML(1);\r\n//     console.debug(`1818 ${where}:`)\r\n//     console.debug(xml.documentElement.outerHTML);\r\n// }\r\n\r\nexport class ReadingGroup {\r\n    public readonly groupId: string;\r\n    public readonly editions: Edition[];\r\n    public readonly apparatus: Apparatus;\r\n    public readonly element: Element;\r\n\r\n    private readonly pointers: PointerData[];\r\n\r\n    constructor(apparatus: Apparatus, groupId: string) {\r\n        this.groupId = groupId;\r\n        this.apparatus = apparatus;\r\n        this.editions = this.fillEditions();\r\n        this.pointers = this.fillPointers();\r\n        this.element = this.buildElement();\r\n    }\r\n\r\n    private fillEditions() {\r\n        const editions = [] as Edition[];\r\n        for (const ptr of this.apparatus.pointers) {\r\n            if (ptr.groupId === this.groupId && editions.indexOf(ptr.edition) === -1) {\r\n                editions.push(ptr.edition);\r\n            }\r\n        }\r\n\r\n        return editions;\r\n    }\r\n\r\n    private fillPointers() {\r\n        // Fill pointers for one of the editions in the group, as they are all identical\r\n        const edition = this.editions[0];\r\n        return this.apparatus.pointers.filter((ptr) => ptr.groupId === this.groupId && ptr.edition === edition);\r\n    }\r\n\r\n    private buildElement() {\r\n        // Build a new XML element that contains all the dereferenced pointers in this group\r\n        // We create a new document for each such element\r\n        const doc = document.implementation.createDocument(null, null, null);\r\n        const group = doc.createElement('rdgGrp');\r\n        const children = this.pointers.map((ptr) => ptr.dereferenced!);\r\n        for(const child of children) {\r\n            const clone = child.cloneNode(true);  // We must clone the node, otherwise it's detached from the original XML\r\n            group.appendChild(clone);\r\n        }\r\n        doc.appendChild(group);\r\n\r\n        return group;\r\n    }\r\n}\r\n\r\nexport class Apparatus {  // Content of the <app> tag\r\n    public readonly id: string;\r\n    public readonly n: number | undefined;\r\n    public readonly element: Element;\r\n\r\n    public pointers: PointerData[];\r\n    private _groups: ReadingGroup[];\r\n\r\n    constructor(element: Element) {\r\n        this.element = element;\r\n\r\n        const idAttr = element.attributes.getNamedItem('xml:id')\r\n        if (!idAttr) {\r\n            throw new Error('<app> tag with no xml:id');\r\n        }\r\n        this.id = idAttr.value;\r\n\r\n        const nAttr = element.attributes.getNamedItem('n');\r\n        this.n = nAttr ? parseInt(nAttr.value) : undefined;\r\n\r\n        this.pointers = this.parsePointers();\r\n        this._groups = [];\r\n    }\r\n\r\n    public get groups() { return this._groups; }\r\n\r\n    public buildGroups() {\r\n        const groupSet = new Set<string>(this.pointers.map((ptr) => ptr.groupId));\r\n        this._groups = Array.from(groupSet).map((grp) => new ReadingGroup(this, grp));\r\n    }\r\n\r\n    private parsePointers() {\r\n        const ptrElements = Array.from(this.element.getElementsByTagName('ptr'));\r\n        const ptrs = ptrElements.map((el) => this.parsePointer(el));\r\n\r\n        return ptrs;\r\n    }\r\n\r\n    private parsePointer(ptrElement: Element): PointerData {\r\n        const rdgElement = ptrElement.parentNode as Element;\r\n        if (!rdgElement || rdgElement.tagName !== 'rdg') {\r\n            throw new Error(`Parent of <ptr> is not <rdg>`);\r\n        }\r\n        const witAttr = rdgElement.attributes.getNamedItem('wit');\r\n        if (!witAttr) {\r\n            throw new Error('<rdg> element does not have a wit attribute');\r\n        }\r\n        const editionCode = witAttr.value.substr(2);  // with is #f1818, #fMS etc...\r\n        let edition: Edition;\r\n        try {\r\n            edition = FvStore.getEdition(editionCode);\r\n        } catch(err) {\r\n            throw new Error(`<rdg> has invalid witness ${witAttr.value}`);\r\n        }\r\n\r\n        const rdgGroupElement = rdgElement.parentNode as Element;\r\n        if(!rdgGroupElement || rdgGroupElement.tagName !== 'rdgGrp') {\r\n            throw new Error(`Parent of <rdg> element is not <rdgGrp>`);\r\n        }\r\n        const grpIdAttr = rdgGroupElement.attributes.getNamedItem('xml:id');\r\n        if (!grpIdAttr) {\r\n            throw new Error('<rdrGrp> has no xml:id');\r\n        }\r\n        const groupId = grpIdAttr.value;\r\n\r\n        const targetAttr = ptrElement.attributes.getNamedItem('target');\r\n        if (!targetAttr) {\r\n            throw new Error(`<ptr> element has not target attribute`);\r\n        }\r\n\r\n        const parts = targetAttr.value.split('#')\r\n        if (parts.length !== 2) {\r\n            throw new Error(`Target ${targetAttr.value} is not well formatted. Expected uri#xpath`);\r\n        }\r\n\r\n        return {\r\n            ptrElement,\r\n            edition,\r\n            groupId,\r\n            referencedUrl: parts[0],\r\n            referencedTarget: parts[1],\r\n        };\r\n    }\r\n\r\n    public getOtherGroups(ed: Edition) {\r\n        // Returns all the groups besides the one that holds this edition\r\n        return this.groups.filter((grp) => grp.editions.indexOf(ed) === -1);\r\n    }\r\n}\r\n\r\ninterface StringRange {\r\n    xpath: string,\r\n    start: number,\r\n    length: number,\r\n}\r\n\r\n\r\nexport class Spine {\r\n    public readonly chunkNumber: number;\r\n    private _apps: Apparatus[] | undefined;\r\n    private _xml: Document | undefined;\r\n    private _initialized = false;\r\n    private _initializationPromise?: Promise<void>;\r\n    private static mockElementCount = 0;\r\n    \r\n    constructor(chunk: number) {\r\n        this.chunkNumber = chunk\r\n    }\r\n\r\n    public initialize(): Promise<void> {\r\n        // Initialize may be called several times before the first initialization complete.\r\n        // We make sure initialization runs only once\r\n        if(this._initializationPromise) {\r\n            return this._initializationPromise;\r\n        }\r\n\r\n        this._initializationPromise = this.innerInitialize();\r\n        this._initializationPromise.then(() => {\r\n            this._initializationPromise = undefined;\r\n        })\r\n        return this._initializationPromise;\r\n    }\r\n\r\n    private async innerInitialize() {\r\n        if(this._initialized) {\r\n            return;\r\n        }\r\n\r\n        this._xml = await this.getXML();\r\n\r\n        await this.parseApps();\r\n        await this.fetchAllReferences();\r\n        await this.rewriteStringRanges();\r\n        await this.dereferencePointers();\r\n        this.addBackPointers();\r\n        this.buildGroupsInApps();\r\n        \r\n        this._initialized = true;\r\n    }\r\n\r\n    private async getXML() {\r\n        const chunkStr = this.chunkNumber < 10 ? `0${this.chunkNumber}` : `${this.chunkNumber}`;\r\n        const url = `https://raw.githubusercontent.com/PghFrankenstein/fv-data/master/standoff_Spine/spine_C${chunkStr}.xml`\r\n\r\n        const document = await FvStore.cache.getXML(url);\r\n        return document;\r\n    }\r\n\r\n    private async parseApps() {\r\n        if(!this._xml) {\r\n            throw new Error('parseApps called before getXML, which makes no sense')\r\n        }\r\n\r\n        const appElements = Array.from(this._xml.getElementsByTagName('app'));\r\n        const apps = appElements.map((app) => new Apparatus(app));\r\n        this._apps = apps;\r\n    }\r\n\r\n    public get apps(): Apparatus[] {\r\n        if (!this._apps) {\r\n            throw new Error(`Spine not initialized yet`);\r\n        }\r\n        return this._apps;\r\n    }\r\n\r\n    // Download all referenced XMLs concurrently (if they're not cached)\r\n    private async fetchAllReferences() {\r\n        let allUrls = [] as string[];\r\n\r\n        for(let app of this.apps) {\r\n            const urls = app.pointers.map((ptr) => ptr.referencedUrl);\r\n            allUrls = allUrls.concat(urls);\r\n        }\r\n\r\n        const unique = Array.from(new Set<string>(allUrls));\r\n        const promises = unique.map((url) => FvStore.cache.getXML(url));\r\n        await Promise.all(promises);  // Returns only once all URLs have been fetched\r\n    }\r\n\r\n    // Rewrite string ranges to ordinary pointers. \r\n    // This is done by adding tags in the target XML with their own ID surrounding the relevant text elements\r\n\r\n    private async rewriteStringRanges() {\r\n        const re = /^string-range\\((?<xpath>.+),(?<start>\\d+),(?<length>\\d+)\\)$/;\r\n        \r\n        for(let app of this.apps) {\r\n            const invalidPointers = new Set<PointerData>();\r\n            for(let ptr of app.pointers) {\r\n                const match = ptr.referencedTarget.match(re);\r\n                if (match) {\r\n                    const stringRange = {\r\n                        xpath: match.groups!.xpath,\r\n                        start: parseInt(match.groups!.start),\r\n                        length: parseInt(match.groups!.length),\r\n                    };\r\n                    try {\r\n                        await this.rewriteStringRange(ptr, stringRange);\r\n                    } catch(err) {\r\n                        invalidPointers.add(ptr);\r\n                    }\r\n                }\r\n            }\r\n\r\n            const validPointers = app.pointers.filter((ptr) => !invalidPointers.has(ptr));\r\n            app.pointers = validPointers;\r\n        }\r\n    }\r\n\r\n    private async rewriteStringRange(ptr: PointerData, range: StringRange) {\r\n        // For now - just get the xml:id of the target element and replace the pointer's target.\r\n        // Add an xml:id if none exists on the target element\r\n        const targetDoc = await FvStore.cache.getXML(ptr.referencedUrl);\r\n\r\n        // The xpath has a bug - it references the 'tei' namespace which is not defined in the spine files - \r\n        // the default namespace is the tei namespace there. So we just drop all 'tei:' from the xpath\r\n        const patchedXPath = range.xpath.replace(/tei:/g, '');\r\n        const targetNodes = evaluateXPath(targetDoc, patchedXPath);\r\n\r\n        if (targetNodes.length === 0) {\r\n            console.error(`string-range for xpath ${patchedXPath} failed to return a node`);\r\n            throw Error('string-range returned no nodes');\r\n        }\r\n\r\n        if (targetNodes.length > 1) {\r\n            console.error(`string-range for xpath ${patchedXPath} returned more than one node`);\r\n            throw Error('string-range returned more than one node');\r\n        }\r\n\r\n        const targetElement = targetNodes[0] as Element;\r\n        const idAttr = targetElement.attributes.getNamedItem('xml:id');\r\n        let xmlId = '';\r\n        if (idAttr) {\r\n            xmlId = idAttr.value;\r\n        } else {\r\n            xmlId = `mock-id-${Spine.mockElementCount}`;\r\n            Spine.mockElementCount += 1;\r\n\r\n            // No xml:id - add a mock one\r\n\r\n            targetElement.setAttribute('xml:id', xmlId);\r\n        }\r\n\r\n        // Update the Pointer\r\n        ptr.referencedTarget = xmlId;  // In memory\r\n        ptr.ptrElement.setAttribute('target', `${ptr.referencedTarget}#${xmlId}`); // In the DOM\r\n    }\r\n\r\n    private async dereferencePointers() {\r\n        for(let app of this.apps) {\r\n            const invalidPointers = new Set<PointerData>();\r\n\r\n            for(let ptr of app.pointers) {\r\n                const document = await FvStore.cache.getXML(ptr.referencedUrl);\r\n                try {\r\n                    const element = findElementByXmlId(document, ptr.referencedTarget);\r\n                    ptr.dereferenced = element;\r\n                } catch(err) {\r\n                    console.error(`Pointer ${ptr.ptrElement.outerHTML} is invalid`);\r\n                    invalidPointers.add(ptr);\r\n                }\r\n            }\r\n\r\n            const validPointers = app.pointers.filter((ptr) => !invalidPointers.has(ptr));\r\n            app.pointers = validPointers\r\n        }\r\n    }\r\n\r\n    private addBackPointers() {\r\n        // We will add the back pointers to all editions while we're at it\r\n        // Backpointers are an attribute - app-ref, which contains the id of the app element\r\n        for(let app of this.apps) {\r\n            for(let ptr of app.pointers) {\r\n                if (!ptr.dereferenced) {\r\n                    console.error('Non dereferenced pointed in addBackPointers - pointers should all be dereferenced by now');\r\n                    continue;\r\n                }\r\n                ptr.dereferenced!.setAttribute('app-ref', app.id);\r\n            }\r\n        }\r\n    }\r\n\r\n    private buildGroupsInApps() {\r\n        // Build the groups in all App objects\r\n        for(const app of this.apps) {\r\n            app.buildGroups();\r\n        }\r\n    }\r\n}\r\n","import XmlCache from \"./xml-cache\";\r\nimport { Edition, EditionWithBody, MSEdition } from \"./edition\";\r\nimport { Spine } from \"./spine\";\r\n\r\n/*\r\n * This class contains the application Store, which holds all the TEI data, as well as processed data.\r\n * We are not using a Redux store here to save time. In the future we might turn this into a Redux store.\r\n * In the mean time, we have a singleton store instance, which is passed to the root component of the application,\r\n * (although the singleton can just be accessed by any class)\r\n */\r\n\r\n class FvStoreClass {\r\n     public readonly cache: XmlCache;\r\n     public readonly editions: Edition[];\r\n     public readonly spines: Spine[];\r\n     public static instance = new FvStoreClass();\r\n\r\n     private constructor() {\r\n         this.cache = new XmlCache();\r\n         this.editions = [\r\n             new EditionWithBody('1818', '1818', [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]),\r\n             new EditionWithBody('1823', '1823', [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]),\r\n             new EditionWithBody('1831', '1831', [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]),\r\n             new EditionWithBody('Thomas', 'Thomas', [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]),\r\n             new MSEdition('MS', 'MS', [7, 8, 9, 10]),\r\n         ]\r\n\r\n         this.spines = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((i) => new Spine(i));\r\n     }\r\n\r\n     public getEdition(code: string): Edition {\r\n         const ed = this.editions.find((ed) => ed.code === code);\r\n\r\n         if (!ed) {\r\n             throw new Error(`Can't find edition ${code}`);\r\n         }\r\n         return ed;\r\n     }\r\n\r\n     public getSpine(chunk: number): Spine {\r\n         const spine = this.spines.find((sp) => sp.chunkNumber === chunk);\r\n\r\n         if(!spine) {\r\n             throw new Error(`Can't find spine for chunk ${chunk}`);\r\n         }\r\n         return spine;\r\n     }\r\n }\r\n\r\nconst FvStore = FvStoreClass.instance;\r\nexport default FvStore;  // Everybody can just access FvStore.property","import { Edition } from \"../../data/edition\";\r\nimport React from \"react\";\r\n\r\ninterface EditionDotProps {\r\n    edition: Edition;\r\n}\r\n\r\nclass EditionDot extends React.Component<EditionDotProps> {\r\n    render() {\r\n        const classes = `dot ed-${this.props.edition.code}`;\r\n\r\n        return <span className={classes}/>;\r\n    }\r\n}\r\n\r\nexport default EditionDot;","import React from 'react';\r\nimport Select from 'react-select';\r\nimport { Edition } from '../../data/edition';\r\nimport FvStore from '../../data/store';\r\nimport '../../styles/general.sass';\r\nimport EditionDot from '../helpers/EditionDot';\r\n\r\nexport interface SelectOption {\r\n    value: string;\r\n    label: any;// HTMLSpanElement;\r\n}\r\n\r\ninterface EditionSelectorProps {\r\n    editions: Edition[],\r\n    edition: Edition,\r\n\r\n    onEditionSelected: (edition: Edition) => void;\r\n}\r\n\r\ninterface EditionSelectorState {\r\n    availableEditions: SelectOption[],\r\n    edition: Edition | undefined,\r\n}\r\n\r\nclass EditionSelector extends React.Component<EditionSelectorProps, EditionSelectorState> {\r\n\r\n    state = {\r\n        availableEditions: [] as SelectOption[],\r\n        edition: undefined as Edition | undefined,\r\n    }\r\n    \r\n    componentDidMount = () => {\r\n        const editions = FvStore.editions.map((ed, index) => ({ key: index, value: ed.code, label: <label><EditionDot edition={ ed }/>{ed.name}</label> } as SelectOption));\r\n\r\n        this.setState({ availableEditions: editions, });\r\n    }\r\n\r\n    editionChanged = (selectedOption: SelectOption) => {\r\n        const edition = FvStore.editions.find((ed) => ed.code === selectedOption.value);\r\n        if(!edition) {\r\n            console.warn(`Couldn't find edition for selection ${selectedOption.value}`);\r\n            return;\r\n        }\r\n\r\n        this.props.onEditionSelected(edition);\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n        <div>\r\n            <label>CHOOSE A VERSION</label>\r\n            <Select\r\n                className='select-style'\r\n                onChange={this.editionChanged}\r\n                options={this.state.availableEditions}\r\n            ></Select>\r\n        </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default EditionSelector;\r\n","import React from 'react';\r\nimport ReactHtmlParser from 'react-html-parser';\r\n\r\nexport interface TeiReactElementProps {\r\n   htmlTag?: string;\r\n   tag: string;\r\n   id?: string;\r\n   teiProps: any;\r\n   showText: boolean;\r\n   showVariations: boolean;\r\n}\r\n\r\nclass TeiReactElement extends React.Component<TeiReactElementProps> {\r\n     \r\n   render() {\r\n      let tag = '';\r\n      let closingTag = '';\r\n\r\n      if(this.props.htmlTag) {\r\n         tag = `<${this.props.htmlTag}>`;\r\n         closingTag = `</${this.props.htmlTag}>`;\r\n      }\r\n\r\n      return (\r\n         <div className={`tei-element tei-${this.props.tag}`} data-tei-tag={this.props.tag}>\r\n             {/* data-app-ref={appRef}> */}\r\n            {ReactHtmlParser(tag)}\r\n            {this.props.children}\r\n            {ReactHtmlParser(closingTag)}\r\n         </div>\r\n      );\r\n   }\r\n}\r\n\r\nexport default TeiReactElement;\r\n","import React from 'react';\r\nimport '../../styles/tei.sass';\r\n\r\ninterface TeiReactTextProps {\r\n    text: string;\r\n    showText: boolean;\r\n    showVariations: boolean;\r\n}\r\n\r\nclass TeiReactText extends React.Component<TeiReactTextProps> {\r\n\r\n    render() {\r\n        let classes = 'tei-cdata';\r\n        if (!this.props.showText) {\r\n            classes += ' no-text';\r\n        }\r\n\r\n        return (\r\n            <span className={classes}>\r\n                { this.props.text }      \r\n            </span>\r\n        );\r\n    }\r\n}\r\n            \r\nexport default TeiReactText;\r\n","import React from 'react';\r\nimport { Apparatus } from '../../data/spine';\r\nimport { Edition } from '../../data/edition';\r\nimport '../../styles/tei.sass';\r\nimport EditionDot from '../helpers/EditionDot';\r\n\r\ninterface TeiAppWrapperProps {\r\n   showVariations: boolean;\r\n   showText: boolean;\r\n   edition?: Edition;\r\n   app: Apparatus;\r\n   onAppClick?: (app: Apparatus) => void,\r\n}\r\n\r\nclass TeiAppWrapper extends React.Component<TeiAppWrapperProps> {\r\n   onClick = () => {\r\n      if (this.props.showVariations && this.props.onAppClick) {\r\n         this.props.onAppClick(this.props.app);\r\n      }\r\n   }\r\n\r\n   render() {\r\n      if(!this.props.showVariations) {\r\n         return <div className='app-wrapper-hidden'>{ this.props.children }</div>;\r\n      }\r\n\r\n      const intensity = this.props.app.n || 1;\r\n      const level = (intensity < 5) ? 1 : (intensity < 25) ? 2 : 3;\r\n      const innerClasses = `app-wrapper-content app-intensity-${level}`;\r\n\r\n      // Calculate the dot elements\r\n      const groups = this.props.app.getOtherGroups(this.props.edition!);\r\n      let dotElements: any[] = [];\r\n      for(const group of groups) {\r\n         const groupDots = group.editions.map((ed) => <EditionDot edition={ ed } />);\r\n         dotElements = dotElements.concat(groupDots);\r\n         dotElements.push(<span className='dot dot-break'/>);\r\n      }\r\n\r\n      console.log('dotElements ', dotElements);\r\n      return (\r\n         <div className='app-wrapper' onClick={ this.onClick }>\r\n            <div className={innerClasses}>\r\n               { this.props.children }\r\n            </div>\r\n            <div className='app-wrapper-dots'>\r\n               { dotElements }\r\n            </div>\r\n         </div>\r\n      );\r\n   }\r\n}\r\n\r\nexport default TeiAppWrapper;\r\n","/* This file contains a class that takes the TEI and converts it into a React tree */\r\n\r\nimport React, { ReactNode } from 'react';\r\nimport TeiReactElement from '../components/tei/TeiReactElement';\r\nimport TeiReactText from '../components/tei/TeiReactText';\r\nimport { Chunk, Edition } from '../data/edition';\r\nimport TeiAppWrapper from '../components/tei/TeiAppWrapper';\r\nimport { Apparatus } from '../data/spine';\r\n\r\nexport class TeiConverter {\r\n    private static index = 0;\r\n\r\n    constructor(private showVariations: boolean, private showText: boolean, private edition?: Edition, private chunk?: Chunk) {\r\n    }\r\n\r\n    private getHtmlTag(teiTag: string) {\r\n        if (teiTag === 'p') {\r\n            return 'p';\r\n        } else if (teiTag === 'head') {\r\n            return 'h3';\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    private buildProperties(node: Node): any {\r\n        const nodeAttributes = (node as any).attributes;\r\n        const valueProps: any = {};\r\n\r\n        for (var i = 0; i < nodeAttributes.length; i++) {\r\n            let name = nodeAttributes[i].nodeName;\r\n            if (name === 'xml:id') {\r\n                name = 'id';\r\n            }\r\n            valueProps[name] = nodeAttributes[i].nodeValue;\r\n        }\r\n\r\n        return valueProps;\r\n    }\r\n\r\n    public teiToReactElement(node: Node, onAppClick?: (app: Apparatus) => void): ReactNode {  // Returns a single React element\r\n        const reactChildren: ReactNode[] = [];\r\n        // create elements for all children\r\n        if (node.hasChildNodes()) {\r\n            for (let i = 0; i < node.childNodes.length; i++) {\r\n                const childNode = node.childNodes[i];\r\n                let childElement: ReactNode = undefined;\r\n                if (childNode.nodeType === 1) {\r\n                    childElement = this.teiToReactElement(childNode, onAppClick);\r\n                } else if (childNode.nodeType === 3) {\r\n                    let text = childNode.textContent || '';\r\n                    text = text.trim();\r\n                    if (text) {\r\n                        childElement = React.createElement(TeiReactText, {\r\n                            text: childNode.textContent || '',\r\n                            showText: this.showText,\r\n                            showVariations: this.showVariations,\r\n                            key: TeiConverter.index++,\r\n                        });\r\n                    }\r\n                } else {\r\n                    console.warn('Child node of unrecognizezd type: ', childNode);\r\n                }\r\n\r\n                if (childElement) {\r\n                    reactChildren.push(childElement);\r\n                }\r\n            }\r\n        }\r\n\r\n        // build properties\r\n        const teiProps = this.buildProperties(node);\r\n\r\n        // return create react element\r\n        var props: any = {\r\n            tag: node.nodeName,\r\n            key: TeiConverter.index++,\r\n            htmlTag: this.getHtmlTag(node.nodeName),\r\n            showText: this.showText,\r\n            showVariations: this.showVariations,\r\n            teiProps: teiProps,\r\n        };\r\n\r\n        let reactElement: ReactNode = React.createElement(TeiReactElement, props, reactChildren); // Pass children\r\n\r\n        if (this.chunk && this.showVariations && teiProps['app-ref']) {\r\n            const app = this.chunk.getApp(teiProps['app-ref']);\r\n\r\n            // We have an <app> to wrap around the element\r\n            reactElement = React.createElement(TeiAppWrapper, {\r\n                key: TeiConverter.index++,\r\n                showVariations: this.showVariations,\r\n                showText: this.showText,\r\n                edition: this.edition,\r\n                onAppClick,\r\n                app},\r\n            [reactElement])\r\n        }\r\n\r\n        return reactElement;\r\n    }\r\n}\r\n","import React, { ReactNode } from 'react';\r\nimport { TeiConverter } from '../../tei-processing/tei-converter';\r\nimport { Chunk, Edition } from '../../data/edition';\r\nimport { Apparatus } from '../../data/spine';\r\n\r\ninterface TeiRenderingProps {\r\n    chunk: Chunk;\r\n    showVariations: boolean;\r\n    showText: boolean;\r\n    edition: Edition;\r\n    onAppClick?: (app: Apparatus) => void;\r\n}\r\n\r\ninterface TeiRenderingState {\r\n    element?: ReactNode;\r\n}\r\n\r\nclass TeiRendering extends React.Component<TeiRenderingProps, TeiRenderingState> {\r\n    state = {\r\n        element: undefined,\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getTeiObjects();\r\n    }\r\n\r\n    componentDidUpdate(prevProps: TeiRenderingProps) {\r\n        if(!prevProps || \r\n            this.props.chunk !== prevProps.chunk || \r\n            this.props.edition !== prevProps.edition || \r\n            this.props.showText !== prevProps.showText ||\r\n            this.props.showVariations !== prevProps.showVariations) {\r\n            this.getTeiObjects(); // No matter which property has changed, we need to render everything again\r\n        }\r\n    }\r\n\r\n    getTeiObjects = () => {\r\n        const body = this.props.chunk.root;\r\n    \r\n        const converter = new TeiConverter(this.props.showVariations, this.props.showText, this.props.edition, this.props.chunk);\r\n        const reactElement = converter.teiToReactElement(body, this.props.onAppClick);\r\n\r\n        this.setState( { element: reactElement });\r\n    } \r\n\r\n    render() {\r\n        return (\r\n            <div className=\"tei-container\">\r\n                { this.state.element }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TeiRendering;\r\n","import React from 'react';\r\nimport { Edition } from '../../data/edition';\r\nimport Select from 'react-select';\r\nimport { SelectOption } from './EditionSelector';\r\nimport pre from '../../assets/pre.jpg';\r\nimport next from '../../assets/next.jpg';\r\nimport '../../styles/general.sass';\r\n\r\n\r\ninterface PagingData {\r\n    edition: Edition | undefined;\r\n    chunk: number;\r\n    onChunkSelected: (chunk: number) => void;\r\n}\r\n\r\ninterface PagingState {\r\n    chunkIndex: number,\r\n    selectedOption: SelectOption | undefined,\r\n    availableChunks: SelectOption[],\r\n    disablePrev: boolean,\r\n    disableNext: boolean,\r\n}\r\n\r\nclass Paging extends React.Component<PagingData, PagingState> {\r\n\r\n    state = {\r\n        chunkIndex: this.props.chunk,\r\n        selectedOption: undefined as SelectOption | undefined,\r\n        availableChunks: [] as SelectOption[],\r\n        disablePrev: true,\r\n        disableNext: false,\r\n    }\r\n\r\n    componentDidUpdate(prevProps: PagingData) {\r\n        if (this.props.edition !== prevProps.edition) {\r\n            let chunks = [] as SelectOption[];\r\n            if (this.props.edition) {\r\n                chunks = this.props.edition.chunks.map((c) => ({ value: c.toString(), label: c.toString() } as SelectOption));\r\n                const firstChunk = this.props.edition.chunks[0];\r\n                this.setState( { availableChunks: chunks, chunkIndex: 0, selectedOption: chunks[0] });\r\n                this.props.onChunkSelected(firstChunk);\r\n            }\r\n        }\r\n    }\r\n\r\n    onChunkChanged = (selectedOption: SelectOption) => {\r\n        const chunk = parseInt(selectedOption.value);\r\n        const index = this.state.availableChunks.findIndex((opt) => opt.value === chunk.toString());\r\n        this.setState({ chunkIndex: index, selectedOption });\r\n\r\n        this.props.onChunkSelected(chunk);\r\n    }\r\n\r\n    updateChunk = (delta: number) => {\r\n        this.setState( {disablePrev: false, disableNext: false} );\r\n        const chunk = this.state.chunkIndex + 1;\r\n        const newChunk = chunk + delta;\r\n        if (newChunk === 1) {\r\n            this.setState( {disablePrev: true} );\r\n        } else if (newChunk === this.state.availableChunks.length) {\r\n            this.setState( {disableNext: true })\r\n        }\r\n        if (this.props.edition!.chunks.indexOf(newChunk) === -1) {\r\n            return;\r\n        }\r\n        const newOption = this.state.availableChunks.find((opt) => opt.value === newChunk.toString());\r\n        if (!newOption) {\r\n            console.error(\"Can't locate new option!\")\r\n        }\r\n        this.setState({ chunkIndex: newChunk - 1, selectedOption: newOption });\r\n        this.props.onChunkSelected((newChunk));\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.props.edition ?\r\n                <div>\r\n                    <div className='in-line'>\r\n                        <label>CHOOSE A SECTION</label>\r\n                        <Select\r\n                            className='select-style'\r\n                            onChange={this.onChunkChanged}\r\n                            options={this.state.availableChunks}\r\n                            value={this.state.selectedOption}\r\n                        />\r\n                    </div>\r\n                    \r\n                    <div className='in-line paging-buttons'>\r\n                        <button onClick={() => this.updateChunk(-1)} className={this.state.disablePrev ? 'disable-button': ''}\r\n                            disabled={this.state.disablePrev}><img src={pre} alt={pre} /></button><label>Previous Section</label>\r\n                        <label className='margin-button'>Next Section</label><button className={this.state.disableNext ? 'disable-button': ''} onClick={() => this.updateChunk(1)}\r\n                            disabled={this.state.disableNext}><img src={next} alt={next} /></button>\r\n                    </div>\r\n                </div>\r\n                : ''}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Paging;\r\n","import React from 'react';\r\nimport FvStore from '../../data/store';\r\nimport { Edition } from '../../data/edition';\r\nimport '../../styles/_viewer.sass';\r\n// import '../../styles/general.sass';\r\n\r\nimport variations from '../../assets/variations.jpg';\r\nimport EditionDot from '../helpers/EditionDot';\r\n\r\ninterface HeaderData {\r\n    edition: Edition | undefined;\r\n}\r\n\r\nclass Header extends React.Component<HeaderData> {\r\n\r\n    render() {\r\n        const editions = FvStore.editions.map((e, index) => \r\n            <label key={index} className='edition-label'><EditionDot edition={e}/>{e.name}</label>);\r\n        return (\r\n            <div>\r\n                <header className='viewer__cols'>\r\n                    <div id='viewer__legend-editions'>\r\n                        {editions}\r\n                    </div>\r\n                    <div id='viewer__title'>\r\n                        {this.props.edition ?\r\n                        <h2>{this.props.edition.name} Edition</h2>\r\n                        : <h2>Edition</h2>}\r\n                    </div>\r\n                    <div id='viewer__legend-variance'>\r\n                        <label>Amount of Variance</label>\r\n                        <img src={variations} alt={variations} />\r\n                    </div>\r\n                </header>\r\n\r\n                <hr className='line' />\r\n                <div className='viewer__cols'>\r\n                    <div>Marginalia</div>\r\n                    <div>Text</div>\r\n                    <div>Variations</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\ninterface OptionsSelectorProps {\r\n    showVariations: boolean,\r\n    showText: boolean,\r\n\r\n    onVariationChanged: (variation: boolean) => void;\r\n    onTextChanged: (text: boolean) => void;\r\n}\r\n\r\ninterface OptionsSelectorState {\r\n    showVariations: boolean,\r\n    showText: boolean,\r\n}\r\n\r\nclass OptionsSelector extends React.Component<OptionsSelectorProps, OptionsSelectorState> {\r\n\r\n    state = {\r\n        showVariations: true,\r\n        showText: true,\r\n    }\r\n    \r\n    componentDidUpdate(prevProps: OptionsSelectorProps) {\r\n        if (this.props.showVariations !== this.state.showVariations) {\r\n            this.setState( { showVariations: this.props.showVariations });\r\n        }\r\n\r\n        if(this.props.showText !== this.state.showText) {\r\n            this.setState( { showText: this.props.showText });\r\n        }\r\n        \r\n    }\r\n\r\n    onVariationChanged = () => {\r\n        const newShow = !this.state.showVariations;\r\n        this.setState( { showVariations: newShow });\r\n        this.props.onVariationChanged(newShow);\r\n    }\r\n    \r\n    onTextChanged = () => {\r\n        const newShowText = !this.state.showText;\r\n        this.setState( { showText: newShowText });\r\n        this.props.onTextChanged(newShowText);\r\n    }\r\n    \r\n    render() {\r\n        return (\r\n        <div>\r\n            <label className='options-label'>CHOOSE OPTIONS</label>\r\n            <label className='options-label'>\r\n                <input\r\n                    name=\"variation\"\r\n                    type=\"checkbox\"\r\n                    checked={this.state.showVariations}\r\n                    onChange={this.onVariationChanged} />\r\n                See Variants\r\n            </label>\r\n            \r\n            <label className='options-label'>\r\n                <input\r\n                    name=\"text\"\r\n                    type=\"checkbox\"\r\n                    checked={this.state.showText}\r\n                    onChange={this.onTextChanged} />\r\n                See Text\r\n            </label>\r\n        </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default OptionsSelector;\r\n","import { ReadingGroup } from \"../../data/spine\";\r\nimport React from \"react\";\r\nimport EditionDot from \"../helpers/EditionDot\";\r\nimport { TeiConverter } from \"../../tei-processing/tei-converter\";\r\n\r\ninterface ReadingGroupComponentProps {\r\n    group: ReadingGroup;\r\n}\r\n\r\n// Note: This class is called ReadingGroupComponent because ReadingGroup is already taken\r\nclass ReadingGroupComponent extends React.Component<ReadingGroupComponentProps> {\r\n    render() {\r\n        const editionNames = this.props.group.editions.map((ed) => ed.name);\r\n        const title = editionNames.join(', ')\r\n        const dots = this.props.group.editions.map((ed) => <EditionDot edition={ed}/>);\r\n\r\n        const converter = new TeiConverter(false, true);\r\n        const content = converter.teiToReactElement(this.props.group.element);\r\n\r\n        return (\r\n            <div className='reading-group'>\r\n                <div className='reading-group-dots'>{ dots }</div>\r\n                <div className='reading-group-title'>{ title }</div>\r\n                <div className='reading-group-content'>\r\n                    { content }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ReadingGroupComponent;","import { Apparatus } from \"../../data/spine\";\r\nimport React from \"react\";\r\n\r\nimport '../../styles/tei.sass';\r\nimport { Edition } from \"../../data/edition\";\r\nimport ReadingGroupComponent from \"./ReadingGroupComponent\";\r\n\r\ninterface VariationProps {\r\n    app: Apparatus;\r\n    edition: Edition;\r\n}\r\n\r\nclass Variation extends React.Component <VariationProps> {\r\n    render() {\r\n        const groups = this.props.app.groups.map((grp) => (\r\n            <ReadingGroupComponent group={grp}/>\r\n        ))\r\n        return (\r\n            <div className=\"app-list\">\r\n                <hr className=\"app-list-to-divider\"/>\r\n                { groups }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Variation;","import React from 'react';\r\nimport EditionSelector from '../PageLayout/EditionSelector';\r\nimport TeiRendering from '../tei/TeiContainer';\r\nimport FvStore from '../../data/store';\r\nimport { Edition, Chunk } from '../../data/edition';\r\nimport Paging from '../PageLayout/Paging';\r\nimport Header from '../PageLayout/Header';\r\nimport OptionsSelector from '../PageLayout/OptionsSelector';\r\nimport '../../styles/_00_configuration.sass';\r\nimport '../../styles/_viewer.sass';\r\nimport '../../styles/general.sass';\r\nimport { Apparatus } from '../../data/spine';\r\nimport Variation from '../Variations/App';\r\n\r\ninterface ViewerProperties { }\r\n\r\ninterface ViewerState {\r\n    loading: boolean,\r\n    chunk?: Chunk,\r\n    edition?: Edition,\r\n    showVariations: boolean,\r\n    showText: boolean,\r\n    app: Apparatus | undefined,\r\n}\r\n\r\nclass Viewer extends React.Component <ViewerProperties, ViewerState> {\r\n    state = {\r\n        loading: false,\r\n        chunk: undefined as Chunk | undefined,\r\n        edition: undefined as Edition | undefined,\r\n        chunkNumber: 0,\r\n\r\n        showVariations: true,\r\n        showText: true,\r\n        app: undefined,\r\n    }\r\n\r\n    \r\n    onNewChunk = async (chunkNumber: number) => {\r\n        this.setState( {loading: true, chunk: undefined } );\r\n        \r\n        if (!this.state.edition) {\r\n            throw new Error(\"Cannot get chunk if there is no an edition\");\r\n        }\r\n        const chunk = await Chunk.load(this.state.edition, chunkNumber);\r\n        this.setState( {loading: false, chunk } );\r\n    }\r\n\r\n    onNewEdition = (edition: Edition) => {\r\n        this.setState( {edition } );\r\n        console.log(\"edition changed. state.edition=\", this.state.edition)\r\n    }\r\n    onVariation = (show: boolean) => {\r\n        this.setState( { showVariations: show } );\r\n    }\r\n    onText = (show: boolean) => {\r\n        this.setState( { showText: show } );\r\n    }\r\n\r\n    onAppClick = (app: Apparatus) => {\r\n        this.setState( {app} );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <section id='viewer'>\r\n                <div id='viewer__controls'>\r\n                    <EditionSelector\r\n                    key={0}\r\n                    editions={FvStore.editions} \r\n                    edition={this.state.edition!}\r\n                    onEditionSelected={this.onNewEdition}\r\n                    />\r\n\r\n                    <Paging\r\n                    key={1}\r\n                    edition={this.state.edition} \r\n                    chunk={this.state.chunkNumber}\r\n                    onChunkSelected={this.onNewChunk} />\r\n\r\n                    <OptionsSelector \r\n                    showVariations={this.state.showVariations}\r\n                    showText={this.state.showText}\r\n                    onVariationChanged={this.onVariation}\r\n                    onTextChanged={this.onText}\r\n                    />\r\n                </div>\r\n                \r\n                <Header\r\n                edition={this.state.edition} />\r\n\r\n                <div id='viewer__contents' className='viewer__cols'>\r\n                    <aside id=\"viewer__marginalia\">\r\n                    </aside>\r\n                    { this.state.chunk && this.state.edition ? \r\n                    <TeiRendering\r\n                    chunk={this.state.chunk}\r\n                    edition={this.state.edition}\r\n                    showVariations={this.state.showVariations}\r\n                    showText={this.state.showText}\r\n                    onAppClick={this.onAppClick}/> : <div></div>}\r\n                    <aside id=\"viewer_variations\">\r\n                        { this.state.app ? <Variation app={this.state.app!} edition={this.state.edition!}/> : '' }\r\n                    </aside>\r\n                </div>\r\n\r\n                <hr className='line' />\r\n                <footer id=\"viewer_pagination_controls\">\r\n                    <div></div>\r\n                    \r\n                    <EditionSelector\r\n                    key={2}\r\n                    editions={FvStore.editions} \r\n                    edition={this.state.edition!}\r\n                    onEditionSelected={this.onNewEdition}\r\n                    />\r\n                    <Paging\r\n                    key={3}\r\n                    edition={this.state.edition} \r\n                    chunk={this.state.chunkNumber}\r\n                    onChunkSelected={this.onNewChunk} />\r\n                </footer>\r\n            </section>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Viewer;\r\n","import React from 'react';\r\nimport './App.css';\r\n// import Collator from './collator/Collator';\r\nimport Viewer from './components/Viewer/Viewer';\r\n\r\nclass App extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"App\">\r\n          <Viewer />\r\n        </div>\r\n      </div>);\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}